import{e as wn}from"./abstract-connector.esm.29d9a9d6.js";import{u as br,i as bn}from"./immutable.21bf563e.js";import{d as Dr,m as ia,e as aa,n as _n,o as oa,s as En,b as sa,w as Tn,i as fa,c as ca,f as ua,a as la}from"./index.ec86d93c.js";import"./index.e3d37b72.js";import{s as ha,e as da,a as xa}from"./subscriptionManager.287f040d.js";import{j as Bn,e as pa,d as va,k as ga,h as ma,b as ya}from"./index.c1667228.js";import{z as gt,y as wa,v as mt}from"./vendor.324ec03c.js";import{r as An}from"./___vite-browser-external_commonjs-proxy.95e42533.js";import"./index.f40f696e.js";const Sn=(r,e)=>function(){const t=e.promiseModule,i=new Array(arguments.length);for(let a=0;a<arguments.length;a++)i[a]=arguments[a];return new t((a,s)=>{e.errorFirst?i.push(function(l,d){if(e.multiArgs){const v=new Array(arguments.length-1);for(let x=1;x<arguments.length;x++)v[x-1]=arguments[x];l?(v.unshift(l),s(v)):a(v)}else l?s(l):a(d)}):i.push(function(l){if(e.multiArgs){const d=new Array(arguments.length-1);for(let v=0;v<arguments.length;v++)d[v]=arguments[v];a(d)}else a(l)}),r.apply(this,i)})};var ba=(r,e)=>{e=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},e);const t=a=>{const s=l=>typeof l=="string"?a===l:l.test(a);return e.include?e.include.some(s):!e.exclude.some(s)};let i;typeof r=="function"?i=function(){return e.excludeMain?r.apply(this,arguments):Sn(r,e).apply(this,arguments)}:i=Object.create(Object.getPrototypeOf(r));for(const a in r){const s=r[a];i[a]=typeof s=="function"&&t(a)?Sn(s,e):s}return i};const _a=ha,Ea=1e3,Ta=(r,e)=>r+e,kn=["sync","latest"];class Ba extends _a{constructor(e={}){super();this._blockResetDuration=e.blockResetDuration||20*Ea,this._blockResetTimeout,this._currentBlock=null,this._isRunning=!1,this._onNewListener=this._onNewListener.bind(this),this._onRemoveListener=this._onRemoveListener.bind(this),this._resetCurrentBlock=this._resetCurrentBlock.bind(this),this._setupInternalEvents()}isRunning(){return this._isRunning}getCurrentBlock(){return this._currentBlock}async getLatestBlock(){return this._currentBlock?this._currentBlock:await new Promise(t=>this.once("latest",t))}removeAllListeners(e){e?super.removeAllListeners(e):super.removeAllListeners(),this._setupInternalEvents(),this._onRemoveListener()}_start(){}_end(){}_setupInternalEvents(){this.removeListener("newListener",this._onNewListener),this.removeListener("removeListener",this._onRemoveListener),this.on("newListener",this._onNewListener),this.on("removeListener",this._onRemoveListener)}_onNewListener(e,t){!kn.includes(e)||this._maybeStart()}_onRemoveListener(e,t){this._getBlockTrackerEventCount()>0||this._maybeEnd()}_maybeStart(){this._isRunning||(this._isRunning=!0,this._cancelBlockResetTimeout(),this._start())}_maybeEnd(){!this._isRunning||(this._isRunning=!1,this._setupBlockResetTimeout(),this._end())}_getBlockTrackerEventCount(){return kn.map(e=>this.listenerCount(e)).reduce(Ta)}_newPotentialLatest(e){const t=this._currentBlock;t&&Rn(e)<=Rn(t)||this._setCurrentBlock(e)}_setCurrentBlock(e){const t=this._currentBlock;this._currentBlock=e,this.emit("latest",e),this.emit("sync",{oldBlock:t,newBlock:e})}_setupBlockResetTimeout(){this._cancelBlockResetTimeout(),this._blockResetTimeout=setTimeout(this._resetCurrentBlock,this._blockResetDuration),this._blockResetTimeout.unref&&this._blockResetTimeout.unref()}_cancelBlockResetTimeout(){clearTimeout(this._blockResetTimeout)}_resetCurrentBlock(){this._currentBlock=null}}var Aa=Ba;function Rn(r){return Number.parseInt(r,16)}const Sa=ba,ka=Aa,Ra=1e3;class Pa extends ka{constructor(e={}){if(!e.provider)throw new Error("PollingBlockTracker - no provider specified.");const t=e.pollingInterval||20*Ra,i=e.retryTimeout||t/10,a=e.keepEventLoopActive!==void 0?e.keepEventLoopActive:!0,s=e.setSkipCacheFlag||!1;super(Object.assign({blockResetDuration:t},e));this._provider=e.provider,this._pollingInterval=t,this._retryTimeout=i,this._keepEventLoopActive=a,this._setSkipCacheFlag=s}async checkForLatestBlock(){return await this._updateLatestBlock(),await this.getLatestBlock()}_start(){this._performSync().catch(e=>this.emit("error",e))}async _performSync(){for(;this._isRunning;)try{await this._updateLatestBlock(),await Pn(this._pollingInterval,!this._keepEventLoopActive)}catch(e){const t=new Error(`PollingBlockTracker - encountered an error while attempting to update latest block:
${e.stack}`);try{this.emit("error",t)}catch{console.error(t)}await Pn(this._retryTimeout,!this._keepEventLoopActive)}}async _updateLatestBlock(){const e=await this._fetchLatestBlock();this._newPotentialLatest(e)}async _fetchLatestBlock(){const e={jsonrpc:"2.0",id:1,method:"eth_blockNumber",params:[]};this._setSkipCacheFlag&&(e.skipCache=!0);const t=await Sa(i=>this._provider.sendAsync(e,i))();if(t.error)throw new Error(`PollingBlockTracker - encountered error fetching block:
${t.error}`);return t.result}}var Ca=Pa;function Pn(r,e){return new Promise(t=>{const i=setTimeout(t,r);i.unref&&e&&i.unref()})}const Cn=wn.exports.EventEmitter,La=br.inherits;var Ua=_r;La(_r,Cn);function _r(){const r=this;Cn.call(r),r.isLocked=!0}_r.prototype.go=function(){const r=this;r.isLocked=!1,r.emit("unlock")};_r.prototype.stop=function(){const r=this;r.isLocked=!0,r.emit("lock")};_r.prototype.await=function(r){const e=this;e.isLocked?e.once("unlock",r):setTimeout(r)};const Ia=Bn;var Na={cacheIdentifierForPayload:Ma,canCache:Ln,blockTagForPayload:Oa,paramsWithoutBlockTag:Un,blockTagParamIndex:yt,cacheTypeForPayload:In};function Ma(r,e={}){if(!Ln(r))return null;const{includeBlockRef:t}=e,i=t?r.params:Un(r);return r.method+":"+Ia(i)}function Ln(r){return In(r)!=="never"}function Oa(r){var e=yt(r);return e>=r.params.length?null:r.params[e]}function Un(r){var e=yt(r);return e>=r.params.length?r.params:r.method==="eth_getBlockByNumber"?r.params.slice(1):r.params.slice(0,e)}function yt(r){switch(r.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":return 1;case"eth_getBlockByNumber":return 0;default:return}}function In(r){switch(r.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":return"fork";case"eth_gasPrice":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"eth_blockNumber":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":return"never"}}const Nn=3;var Da=Ha;function Ha(){var r=new Date().getTime()*Math.pow(10,Nn),e=Math.floor(Math.random()*Math.pow(10,Nn));return r+e}const Fa=Da,$a=bn;var wt=za;function za(r){return $a({id:Fa(),jsonrpc:"2.0",params:[]},r)}const Mn=wn.exports.EventEmitter,qa=br.inherits,Be=Dr,Wa=Ca,ja=ia.exports,Va=aa.exports,Ga=Ua,Ka=wt,Ya=function(){};var Ja=Ie;qa(Ie,Mn);Object.defineProperty(Ie,"name",{value:"HttpProvider"});function Ie(r){const e=this;Mn.call(e),e.setMaxListeners(30),r=r||{};const t={sendAsync:e._handleAsync.bind(e)},i=r.blockTrackerProvider||t;e._blockTracker=r.blockTracker||new Wa({provider:i,pollingInterval:r.pollingInterval||4e3,setSkipCacheFlag:!0}),e._ready=new Ga,e.currentBlock=null,e._providers=[]}Ie.prototype.start=function(r=Ya){const e=this;e._ready.go(),e._blockTracker.on("latest",t=>{e._getBlockByNumber(t,(i,a)=>{if(i){this.emit("error",i);return}if(!a)return;const s=Za(a);e._setCurrentBlock(s),e.emit("rawBlock",a),e.emit("latest",a)})}),e._blockTracker.on("sync",e.emit.bind(e,"sync")),e._blockTracker.on("error",e.emit.bind(e,"error")),e._running=!0,e.emit("start")};Ie.prototype.stop=function(){const r=this;r._blockTracker.removeAllListeners(),r._running=!1,r.emit("stop")};Ie.prototype.isRunning=function(){return this._running};Ie.prototype.addProvider=function(r,e){const t=this;typeof e=="number"?t._providers.splice(e,0,r):t._providers.push(r),r.setEngine(this)};Ie.prototype.removeProvider=function(r){const e=this,t=e._providers.indexOf(r);if(t<0)throw new Error("Provider not found.");e._providers.splice(t,1)};Ie.prototype.send=function(r){throw new Error("Web3ProviderEngine does not support synchronous requests.")};Ie.prototype.sendAsync=function(r,e){const t=this;t._ready.await(function(){Array.isArray(r)?ja(r,t._handleAsync.bind(t),e):t._handleAsync(r,e)})};Ie.prototype._getBlockByNumber=function(r,e){const t=Ka({method:"eth_getBlockByNumber",params:[r,!1],skipCache:!0});this._handleAsync(t,(i,a)=>i?e(i):e(null,a.result))};Ie.prototype._handleAsync=function(r,e){var t=this,i=-1,a=null,s=null,l=[];d();function d(x){if(i+=1,l.unshift(x),i>=t._providers.length)v(new Error('Request for method "'+r.method+'" not handled by any subprovider. Please check your subprovider configuration to ensure this method is handled.'));else try{var y=t._providers[i];y.handleRequest(r,d,v)}catch(S){v(S)}}function v(x,y){s=x,a=y,Va(l,function(S,P){S?S(s,a,P):P()},function(){var S={id:r.id,jsonrpc:r.jsonrpc,result:a};s!=null?(S.error={message:s.stack||s.message||s,code:-32e3},e(s,S)):e(null,S)})}};Ie.prototype._setCurrentBlock=function(r){const e=this;e.currentBlock=r,e.emit("block",r)};function Za(r){return{number:Be.toBuffer(r.number),hash:Be.toBuffer(r.hash),parentHash:Be.toBuffer(r.parentHash),nonce:Be.toBuffer(r.nonce),mixHash:Be.toBuffer(r.mixHash),sha3Uncles:Be.toBuffer(r.sha3Uncles),logsBloom:Be.toBuffer(r.logsBloom),transactionsRoot:Be.toBuffer(r.transactionsRoot),stateRoot:Be.toBuffer(r.stateRoot),receiptsRoot:Be.toBuffer(r.receiptRoot||r.receiptsRoot),miner:Be.toBuffer(r.miner),difficulty:Be.toBuffer(r.difficulty),totalDifficulty:Be.toBuffer(r.totalDifficulty),size:Be.toBuffer(r.size),extraData:Be.toBuffer(r.extraData),gasLimit:Be.toBuffer(r.gasLimit),gasUsed:Be.toBuffer(r.gasUsed),timestamp:Be.toBuffer(r.timestamp),transactions:r.transactions}}const Xa=wt;var Hr=cr;function cr(){}cr.prototype.setEngine=function(r){const e=this;e.engine||(e.engine=r,r.on("block",function(t){e.currentBlock=t}),r.on("start",function(){e.start()}),r.on("stop",function(){e.stop()}))};cr.prototype.handleRequest=function(r,e,t){throw new Error("Subproviders should override `handleRequest`.")};cr.prototype.emitPayload=function(r,e){this.engine.sendAsync(Xa(r),e)};cr.prototype.stop=function(){};cr.prototype.start=function(){};const Qa=Hr;class eo extends Qa{constructor(e){super();if(!e)throw new Error("JsonRpcEngineMiddlewareSubprovider - no constructorFn specified");this._constructorFn=e}setEngine(e){if(this.middleware)throw new Error("JsonRpcEngineMiddlewareSubprovider - subprovider added to engine twice");const t=e._blockTracker,i=this._constructorFn({engine:e,provider:e,blockTracker:t});if(!i)throw new Error("JsonRpcEngineMiddlewareSubprovider - _constructorFn did not return middleware");if(typeof i!="function")throw new Error("JsonRpcEngineMiddlewareSubprovider - specified middleware is not a function");this.middleware=i}handleRequest(e,t,i){const a={id:e.id};this.middleware(e,a,s,l);function s(d){t((v,x,y)=>{v?(delete a.result,a.error={message:v.message||v}):a.result=x,d?d(y):y()})}function l(d){if(d)return i(d);i(null,a.result)}}}var bt=eo;const ro=Bn;var to={cacheIdentifierForPayload:no,canCache:On,blockTagForPayload:io,paramsWithoutBlockTag:Dn,blockTagParamIndex:_t,cacheTypeForPayload:Hn};function no(r,e){const t=e?Dn(r):r.params;return On(r)?r.method+":"+ro(t):null}function On(r){return Hn(r)!=="never"}function io(r){let e=_t(r);return e>=r.params.length?null:r.params[e]}function Dn(r){const e=_t(r);return e>=r.params.length?r.params:r.method==="eth_getBlockByNumber"?r.params.slice(1):r.params.slice(0,e)}function _t(r){switch(r.method){case"eth_getStorageAt":return 2;case"eth_getBalance":case"eth_getCode":case"eth_getTransactionCount":case"eth_call":return 1;case"eth_getBlockByNumber":return 0;default:return}}function Hn(r){switch(r.method){case"web3_clientVersion":case"web3_sha3":case"eth_protocolVersion":case"eth_getBlockTransactionCountByHash":case"eth_getUncleCountByBlockHash":case"eth_getCode":case"eth_getBlockByHash":case"eth_getTransactionByHash":case"eth_getTransactionByBlockHashAndIndex":case"eth_getTransactionReceipt":case"eth_getUncleByBlockHashAndIndex":case"eth_getCompilers":case"eth_compileLLL":case"eth_compileSolidity":case"eth_compileSerpent":case"shh_version":case"test_permaCache":return"perma";case"eth_getBlockByNumber":case"eth_getBlockTransactionCountByNumber":case"eth_getUncleCountByBlockNumber":case"eth_getTransactionByBlockNumberAndIndex":case"eth_getUncleByBlockNumberAndIndex":case"test_forkCache":return"fork";case"eth_gasPrice":case"eth_blockNumber":case"eth_getBalance":case"eth_getStorageAt":case"eth_getTransactionCount":case"eth_call":case"eth_estimateGas":case"eth_getFilterLogs":case"eth_getLogs":case"test_blockCache":return"block";case"net_version":case"net_peerCount":case"net_listening":case"eth_syncing":case"eth_sign":case"eth_coinbase":case"eth_mining":case"eth_hashrate":case"eth_accounts":case"eth_sendTransaction":case"eth_sendRawTransaction":case"eth_newFilter":case"eth_newBlockFilter":case"eth_newPendingTransactionFilter":case"eth_uninstallFilter":case"eth_getFilterChanges":case"eth_getWork":case"eth_submitWork":case"eth_submitHashrate":case"db_putString":case"db_getString":case"db_putHex":case"db_getHex":case"shh_post":case"shh_newIdentity":case"shh_hasIdentity":case"shh_newGroup":case"shh_addToGroup":case"shh_newFilter":case"shh_uninstallFilter":case"shh_getFilterChanges":case"shh_getMessages":case"test_neverCache":return"never"}}var ao=function(e){return(t,i,a,s)=>{let l;const d=new Promise(S=>{l=S});let v,x;e(t,i,async()=>{x=!0,a(S=>{v=S,l()}),await d}).then(async()=>{x?(await d,v(null)):s(null)}).catch(S=>{v?v(S):s(S)})}};const ur=to,oo=ao,so=[void 0,null,"<nil>"];var fo=co;function co(r={}){const{blockTracker:e}=r;if(!e)throw new Error("createBlockCacheMiddleware - No BlockTracker specified");const t=new uo,i={perma:t,block:t,fork:t};return oo(async(a,s,l)=>{if(a.skipCache)return l();const d=ur.cacheTypeForPayload(a),v=i[d];if(!v||!v.canCacheRequest(a))return l();let x=ur.blockTagForPayload(a);x||(x="latest");let y;if(x==="earliest")y="0x00";else if(x==="latest"){const P=await e.getLatestBlock();t.clearBefore(P),y=P}else y=x;const S=await v.get(a,y);S===void 0?(await l(),await v.set(a,y,s.result)):s.result=S})}class uo{constructor(){this.cache={}}getBlockCacheForPayload(e,t){const i=Number.parseInt(t,16);let a=this.cache[i];if(!a){const s={};this.cache[i]=s,a=s}return a}async get(e,t){const i=this.getBlockCacheForPayload(e,t);if(!i)return;const a=ur.cacheIdentifierForPayload(e,!0);return i[a]}async set(e,t,i){if(!this.canCacheResult(e,i))return;const s=this.getBlockCacheForPayload(e,t),l=ur.cacheIdentifierForPayload(e,!0);s[l]=i}canCacheRequest(e){return!(!ur.canCache(e)||ur.blockTagForPayload(e)==="pending")}canCacheResult(e,t){if(!so.includes(t))return!(["eth_getTransactionByHash","eth_getTransactionReceipt"].includes(e.method)&&(!t||!t.blockHash||t.blockHash==="0x0000000000000000000000000000000000000000000000000000000000000000"))}clearBefore(e){const t=this,i=Number.parseInt(e,16);Object.keys(t.cache).map(Number).filter(a=>a<i).forEach(a=>delete t.cache[a])}}const lo=bt,ho=fo;class xo extends lo{constructor(e){super(({blockTracker:t})=>ho(Object.assign({blockTracker:t},e)))}}var Fn=xo;const po=br.inherits,vo=Hr;var go=Et;po(Et,vo);function Et(r){const e=this;r=r||{},e.staticResponses=r}Et.prototype.handleRequest=function(r,e,t){var a=this.staticResponses[r.method];typeof a=="function"?a(r,e,t):a!==void 0?setTimeout(()=>t(null,a)):e()};const mo=bt,yo=da;class wo extends mo{constructor(){super(({blockTracker:e,provider:t,engine:i})=>yo({blockTracker:e,provider:t}))}}var bo=wo,Tt={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(U,z){if(z=(0,d.default)(z||s.default),!(0,i.default)(U))return z(new Error("First argument to waterfall must be an array of functions"));if(!U.length)return z();var H=0;function ee(le){var ie=(0,h.default)(U[H++]);le.push((0,S.default)(de)),ie.apply(null,le)}function de(le){if(le||H===U.length)return z.apply(null,arguments);ee((0,x.default)(arguments,1))}ee([])};var t=fa,i=B(t),a=_n,s=B(a),l=oa.exports,d=B(l),v=En.exports,x=B(v),y=sa.exports,S=B(y),P=Tn,h=B(P);function B(U){return U&&U.__esModule?U:{default:U}}r.exports=e.default})(Tt,Tt.exports);var Bt={exports:{}},At={exports:{}};(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=S;var t=_n,i=y(t),a=ca,s=y(a),l=En.exports,d=y(l),v=Tn,x=y(v);function y(P){return P&&P.__esModule?P:{default:P}}function S(P,h,B){B=B||i.default;var U=(0,s.default)(h)?[]:{};P(h,function(z,H,ee){(0,x.default)(z)(function(de,le){arguments.length>2&&(le=(0,d.default)(arguments,1)),U[H]=le,ee(de)})},function(z){B(z,U)})}r.exports=e.default})(At,At.exports);(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=d;var t=ua.exports,i=l(t),a=At.exports,s=l(a);function l(v){return v&&v.__esModule?v:{default:v}}function d(v,x){(0,s.default)(i.default,v,x)}r.exports=e.default})(Bt,Bt.exports);var pe={},$n={},Er={},tr=gt.exports,_o=pa.ec,St=new _o("secp256k1"),lr=St.curve;Er.privateKeyExport=function(r,e){var t=new tr(r);if(t.ucmp(lr.n)>=0)throw new Error("couldn't export to DER format");var i=St.g.mul(t);return zn(i.getX(),i.getY(),e)};Er.privateKeyModInverse=function(r){var e=new tr(r);if(e.ucmp(lr.n)>=0||e.isZero())throw new Error("private key range is invalid");return e.invm(lr.n).toArrayLike(Buffer,"be",32)};Er.signatureImport=function(r){var e=new tr(r.r);e.ucmp(lr.n)>=0&&(e=new tr(0));var t=new tr(r.s);return t.ucmp(lr.n)>=0&&(t=new tr(0)),Buffer.concat([e.toArrayLike(Buffer,"be",32),t.toArrayLike(Buffer,"be",32)])};Er.ecdhUnsafe=function(r,e,t){var i=St.keyFromPublic(r),a=new tr(e);if(a.ucmp(lr.n)>=0||a.isZero())throw new Error("scalar was invalid (zero or overflow)");var s=i.pub.mul(a);return zn(s.getX(),s.getY(),t)};var zn=function(e,t,i){var a=void 0;return i?(a=Buffer.alloc(33),a[0]=t.isOdd()?3:2,e.toArrayLike(Buffer,"be",32).copy(a,1)):(a=Buffer.alloc(65),a[0]=4,e.toArrayLike(Buffer,"be",32).copy(a,1),t.toArrayLike(Buffer,"be",32).copy(a,33)),a},Fr={},Eo=Buffer.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),To=Buffer.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);Fr.privateKeyExport=function(r,e,t){var i=Buffer.from(t?Eo:To);return r.copy(i,t?8:9),e.copy(i,t?181:214),i};Fr.privateKeyImport=function(r){var e=r.length,t=0;if(e<t+1||r[t]!==48||(t+=1,e<t+1||!(r[t]&128)))return null;var i=r[t]&127;if(t+=1,i<1||i>2||e<t+i)return null;var a=r[t+i-1]|(i>1?r[t+i-2]<<8:0);return t+=i,e<t+a||e<t+3||r[t]!==2||r[t+1]!==1||r[t+2]!==1||(t+=3,e<t+2||r[t]!==4||r[t+1]>32||e<t+2+r[t+1])?null:r.slice(t+2,t+2+r[t+1])};Fr.signatureImportLax=function(r){var e=Buffer.alloc(32,0),t=Buffer.alloc(32,0),i=r.length,a=0;if(r[a++]!==48)return null;var s=r[a++];if(s&128&&(a+=s-128,a>i)||r[a++]!==2)return null;var l=r[a++];if(l&128){if(s=l-128,a+s>i)return null;for(;s>0&&r[a]===0;a+=1,s-=1);for(l=0;s>0;a+=1,s-=1)l=(l<<8)+r[a]}if(l>i-a)return null;var d=a;if(a+=l,r[a++]!==2)return null;var v=r[a++];if(v&128){if(s=v-128,a+s>i)return null;for(;s>0&&r[a]===0;a+=1,s-=1);for(v=0;s>0;a+=1,s-=1)v=(v<<8)+r[a]}if(v>i-a)return null;var x=a;for(a+=v;l>0&&r[d]===0;l-=1,d+=1);if(l>32)return null;var y=r.slice(d,d+l);for(y.copy(e,32-y.length);v>0&&r[x]===0;v-=1,x+=1);if(v>32)return null;var S=r.slice(x,x+v);return S.copy(t,32-S.length),{r:e,s:t}};var Ae=va,$r=Er,kt=Fr,qn=function(e){return e.length!==32?!1:Ae.privateKeyVerify(Uint8Array.from(e))},Bo=function(e,t){if(e.length!==32)throw new RangeError("private key length is invalid");var i=$r.privateKeyExport(e,t);return kt.privateKeyExport(e,i,t)},Ao=function(e){if(e=kt.privateKeyImport(e),e!==null&&e.length===32&&qn(e))return e;throw new Error("couldn't import from DER format")},So=function(e){return Buffer.from(Ae.privateKeyNegate(Uint8Array.from(e)))},ko=function(e){if(e.length!==32)throw new Error("private key length is invalid");return Buffer.from($r.privateKeyModInverse(Uint8Array.from(e)))},Ro=function(e,t){return Buffer.from(Ae.privateKeyTweakAdd(Uint8Array.from(e),t))},Po=function(e,t){return Buffer.from(Ae.privateKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t)))},Co=function(e,t){return Buffer.from(Ae.publicKeyCreate(Uint8Array.from(e),t))},Lo=function(e,t){return Buffer.from(Ae.publicKeyConvert(Uint8Array.from(e),t))},Uo=function(e){return e.length!==33&&e.length!==65?!1:Ae.publicKeyVerify(Uint8Array.from(e))},Io=function(e,t,i){return Buffer.from(Ae.publicKeyTweakAdd(Uint8Array.from(e),Uint8Array.from(t),i))},No=function(e,t,i){return Buffer.from(Ae.publicKeyTweakMul(Uint8Array.from(e),Uint8Array.from(t),i))},Mo=function(e,t){var i=[];return e.forEach(function(a){i.push(Uint8Array.from(a))}),Buffer.from(Ae.publicKeyCombine(i,t))},Oo=function(e){return Buffer.from(Ae.signatureNormalize(Uint8Array.from(e)))},Do=function(e){return Buffer.from(Ae.signatureExport(Uint8Array.from(e)))},Ho=function(e){return Buffer.from(Ae.signatureImport(Uint8Array.from(e)))},Fo=function(e){if(e.length===0)throw new RangeError("signature length is invalid");var t=kt.signatureImportLax(e);if(t===null)throw new Error("couldn't parse DER signature");return $r.signatureImport(t)},$o=function(e,t,i){if(i===null)throw new TypeError("options should be an Object");var a=void 0;if(i){if(a={},i.data===null)throw new TypeError("options.data should be a Buffer");if(i.data){if(i.data.length!==32)throw new RangeError("options.data length is invalid");a.data=new Uint8Array(i.data)}if(i.noncefn===null)throw new TypeError("options.noncefn should be a Function");i.noncefn&&(a.noncefn=function(l,d,v,x,y){var S=v!=null?Buffer.from(v):null,P=x!=null?Buffer.from(x):null,h=Buffer.from("");return i.noncefn&&(h=i.noncefn(Buffer.from(l),Buffer.from(d),S,P,y)),Uint8Array.from(h)})}var s=Ae.ecdsaSign(Uint8Array.from(e),Uint8Array.from(t),a);return{signature:Buffer.from(s.signature),recovery:s.recid}},zo=function(e,t,i){return Ae.ecdsaVerify(Uint8Array.from(t),Uint8Array.from(e),i)},qo=function(e,t,i,a){return Buffer.from(Ae.ecdsaRecover(Uint8Array.from(t),i,Uint8Array.from(e),a))},Wo=function(e,t){return Buffer.from(Ae.ecdh(Uint8Array.from(e),Uint8Array.from(t),{}))},jo=function(e,t,i){if(e.length!==33&&e.length!==65)throw new RangeError("public key length is invalid");if(t.length!==32)throw new RangeError("private key length is invalid");return Buffer.from($r.ecdhUnsafe(Uint8Array.from(e),Uint8Array.from(t),i))},Vo={privateKeyVerify:qn,privateKeyExport:Bo,privateKeyImport:Ao,privateKeyNegate:So,privateKeyModInverse:ko,privateKeyTweakAdd:Ro,privateKeyTweakMul:Po,publicKeyCreate:Co,publicKeyConvert:Lo,publicKeyVerify:Uo,publicKeyTweakAdd:Io,publicKeyTweakMul:No,publicKeyCombine:Mo,signatureNormalize:Oo,signatureExport:Do,signatureImport:Ho,signatureImportLax:Fo,sign:$o,verify:zo,recover:qo,ecdh:Wo,ecdhUnsafe:jo};(function(r){var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},t=ga,i=t.keccak224,a=t.keccak384,s=t.keccak256,l=t.keccak512,d=Vo,v=An,x=ma,y=gt.exports,S=ya;r.MAX_INTEGER=new y("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new y("10000000000000000000000000000000000000000000000000000000000000000",16),r.SHA3_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL=new Buffer(r.SHA3_NULL_S,"hex"),r.SHA3_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY=new Buffer(r.SHA3_RLP_ARRAY_S,"hex"),r.SHA3_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP=new Buffer(r.SHA3_RLP_S,"hex"),r.BN=y,r.rlp=x,r.secp256k1=d,r.zeros=function(h){var B=new Buffer(h);return B.fill(0),B},r.setLengthLeft=r.setLength=function(h,B,U){var z=r.zeros(B);return h=r.toBuffer(h),U?h.length<B?(h.copy(z),z):h.slice(0,B):h.length<B?(h.copy(z,B-h.length),z):h.slice(-B)},r.setLengthRight=function(h,B){return r.setLength(h,B,!0)},r.unpad=r.stripZeros=function(h){h=r.stripHexPrefix(h);for(var B=h[0];h.length>0&&B.toString()==="0";)h=h.slice(1),B=h[0];return h},r.toBuffer=function(h){if(!Buffer.isBuffer(h))if(Array.isArray(h))h=new Buffer(h);else if(typeof h=="string")r.isHexPrefixed(h)?h=new Buffer(r.padToEven(r.stripHexPrefix(h)),"hex"):h=new Buffer(h);else if(typeof h=="number")h=r.intToBuffer(h);else if(h==null)h=new Buffer([]);else if(h.toArray)h=new Buffer(h.toArray());else throw new Error("invalid type");return h},r.intToHex=function(h){v(h%1==0,"number is not a integer"),v(h>=0,"number must be positive");var B=h.toString(16);return B.length%2&&(B="0"+B),"0x"+B},r.intToBuffer=function(h){var B=r.intToHex(h);return new Buffer(B.slice(2),"hex")},r.bufferToInt=function(h){return parseInt(r.bufferToHex(h),16)},r.bufferToHex=function(h){return h=r.toBuffer(h),h.length===0?0:"0x"+h.toString("hex")},r.fromSigned=function(h){return new y(h).fromTwos(256)},r.toUnsigned=function(h){return new Buffer(h.toTwos(256).toArray())},r.sha3=function(h,B){switch(h=r.toBuffer(h),B||(B=256),B){case 224:return i(h);case 256:return s(h);case 384:return a(h);case 512:return l(h);default:throw new Error("Invalid algorithm: keccak"+B)}},r.sha256=function(h){return h=r.toBuffer(h),S("sha256").update(h).digest()},r.ripemd160=function(h,B){h=r.toBuffer(h);var U=S("rmd160").update(h).digest();return B===!0?r.setLength(U,32):U},r.rlphash=function(h){return r.sha3(x.encode(h))},r.isValidPrivate=function(h){return d.privateKeyVerify(h)},r.isValidPublic=function(h,B){return h.length===64?d.publicKeyVerify(Buffer.concat([new Buffer([4]),h])):B?d.publicKeyVerify(h):!1},r.pubToAddress=r.publicToAddress=function(h,B){return h=r.toBuffer(h),B&&h.length!==64&&(h=d.publicKeyConvert(h,!1).slice(1)),v(h.length===64),r.sha3(h).slice(-20)};var P=r.privateToPublic=function(h){return h=r.toBuffer(h),d.publicKeyCreate(h,!1).slice(1)};r.importPublic=function(h){return h=r.toBuffer(h),h.length!==64&&(h=d.publicKeyConvert(h,!1).slice(1)),h},r.ecsign=function(h,B){var U=d.sign(h,B),z={};return z.r=U.signature.slice(0,32),z.s=U.signature.slice(32,64),z.v=U.recovery+27,z},r.ecrecover=function(h,B,U,z){var H=Buffer.concat([r.setLength(U,32),r.setLength(z,32)],64),ee=r.bufferToInt(B)-27;if(ee!==0&&ee!==1)throw new Error("Invalid signature v value");var de=d.recover(h,H,ee);return d.publicKeyConvert(de,!1).slice(1)},r.toRpcSig=function(h,B,U){return r.bufferToHex(Buffer.concat([B,U,r.toBuffer(h-27)]))},r.fromRpcSig=function(h){h=r.toBuffer(h);var B=h[64];return B<27&&(B+=27),{v:B,r:h.slice(0,32),s:h.slice(32,64)}},r.privateToAddress=function(h){return r.publicToAddress(P(h))},r.isValidAddress=function(h){return/^0x[0-9a-fA-F]{40}$/i.test(h)},r.toChecksumAddress=function(h){h=r.stripHexPrefix(h).toLowerCase();for(var B=r.sha3(h).toString("hex"),U="0x",z=0;z<h.length;z++)parseInt(B[z],16)>=8?U+=h[z].toUpperCase():U+=h[z];return U},r.isValidChecksumAddress=function(h){return r.isValidAddress(h)&&r.toChecksumAddress(h)===h},r.generateAddress=function(h,B){return h=r.toBuffer(h),B=new y(B),B.isZero()?B=null:B=new Buffer(B.toArray()),r.rlphash([h,B]).slice(-20)},r.isPrecompiled=function(h){var B=r.unpad(h);return B.length===1&&B[0]>0&&B[0]<5},r.isHexPrefixed=function(h){return h.slice(0,2)==="0x"},r.stripHexPrefix=function(h){return typeof h!="string"?h:r.isHexPrefixed(h)?h.slice(2):h},r.addHexPrefix=function(h){return typeof h!="string"||r.isHexPrefixed(h)?h:"0x"+h},r.padToEven=function(h){return h.length%2&&(h="0"+h),h},r.baToJSON=function(h){if(Buffer.isBuffer(h))return"0x"+h.toString("hex");if(h instanceof Array){for(var B=[],U=0;U<h.length;U++)B.push(r.baToJSON(h[U]));return B}},r.defineProperties=function(h,B,U){if(h.raw=[],h._fields=[],h.toJSON=function(H){if(H){var ee={};return h._fields.forEach(function(de){ee[de]="0x"+h[de].toString("hex")}),ee}return r.baToJSON(this.raw)},h.serialize=function(){return x.encode(h.raw)},B.forEach(function(H,ee){h._fields.push(H.name);function de(){return h.raw[ee]}function le(ie){ie=r.toBuffer(ie),ie.toString("hex")==="00"&&!H.allowZero&&(ie=new Buffer([])),H.allowLess&&H.length?(ie=r.stripZeros(ie),v(H.length>=ie.length,"The field "+H.name+" must not have more "+H.length+" bytes")):!(H.allowZero&&ie.length===0)&&H.length&&v(H.length===ie.length,"The field "+H.name+" must have byte length of "+H.length),h.raw[ee]=ie}Object.defineProperty(h,H.name,{enumerable:!0,configurable:!0,get:de,set:le}),H.default&&(h[H.name]=H.default),H.alias&&Object.defineProperty(h,H.alias,{enumerable:!1,configurable:!0,set:le,get:de})}),U)if(typeof U=="string"&&(U=new Buffer(r.stripHexPrefix(U),"hex")),Buffer.isBuffer(U)&&(U=x.decode(U)),Array.isArray(U)){if(U.length>h._fields.length)throw new Error("wrong number of fields in data");U.forEach(function(H,ee){h[h._fields[ee]]=r.toBuffer(H)})}else if((typeof U=="undefined"?"undefined":e(U))==="object")for(var z in U)h._fields.indexOf(z)!==-1&&(h[z]=U[z]);else throw new Error("invalid data")}})($n);const qe=$n,Pe=gt.exports;var be=function(){};function zr(r){return r.startsWith("int[")?"int256"+r.slice(3):r==="int"?"int256":r.startsWith("uint[")?"uint256"+r.slice(4):r==="uint"?"uint256":r.startsWith("fixed[")?"fixed128x128"+r.slice(5):r==="fixed"?"fixed128x128":r.startsWith("ufixed[")?"ufixed128x128"+r.slice(6):r==="ufixed"?"ufixed128x128":r}be.eventID=function(r,e){var t=r+"("+e.map(zr).join(",")+")";return qe.sha3(new Buffer(t))};be.methodID=function(r,e){return be.eventID(r,e).slice(0,4)};function Ze(r){return parseInt(/^\D+(\d+)$/.exec(r)[1],10)}function Rt(r){var e=/^\D+(\d+)x(\d+)$/.exec(r);return[parseInt(e[1],10),parseInt(e[2],10)]}function Pt(r){var e=r.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function nr(r){var e=typeof r;if(e==="string")return qe.isHexPrefixed(r)?new Pe(qe.stripHexPrefix(r),16):new Pe(r,10);if(e==="number")return new Pe(r);if(r.toArray)return r;throw new Error("Argument is not a number")}function Wn(r){var e=/^(\w+)\((.+)\)$/.exec(r);if(e.length!==3)throw new Error("Invalid method signature");var t=/^(.+)\):\((.+)$/.exec(e[2]);return t!==null&&t.length===3?{method:e[1],args:t[1].split(","),retargs:t[2].split(",")}:{method:e[1],args:e[2].split(",")}}function We(r,e){var t,i,a,s;if(r==="address")return We("uint160",nr(e));if(r==="bool")return We("uint8",e?1:0);if(r==="string")return We("bytes",new Buffer(e,"utf8"));if(jn(r)){if(typeof e.length=="undefined")throw new Error("Not an array?");if(t=Pt(r),t!=="dynamic"&&t!==0&&e.length>t)throw new Error("Elements exceed array size: "+t);a=[],r=r.slice(0,r.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)a.push(We(r,e[s]));if(t==="dynamic"){var l=We("uint256",e.length);a.unshift(l)}return Buffer.concat(a)}else{if(r==="bytes")return e=new Buffer(e),a=Buffer.concat([We("uint256",e.length),e]),e.length%32!=0&&(a=Buffer.concat([a,qe.zeros(32-e.length%32)])),a;if(r.startsWith("bytes")){if(t=Ze(r),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);return qe.setLengthRight(e,32)}else if(r.startsWith("uint")){if(t=Ze(r),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);if(i=nr(e),i.bitLength()>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+i.bitLength());if(i<0)throw new Error("Supplied uint is negative");return i.toArrayLike(Buffer,"be",32)}else if(r.startsWith("int")){if(t=Ze(r),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);if(i=nr(e),i.bitLength()>t)throw new Error("Supplied int exceeds width: "+t+" vs "+i.bitLength());return i.toTwos(256).toArrayLike(Buffer,"be",32)}else if(r.startsWith("ufixed")){if(t=Rt(r),i=nr(e),i<0)throw new Error("Supplied ufixed is negative");return We("uint256",i.mul(new Pe(2).pow(new Pe(t[1]))))}else if(r.startsWith("fixed"))return t=Rt(r),We("int256",nr(e).mul(new Pe(2).pow(new Pe(t[1]))))}throw new Error("Unsupported or invalid type: "+r)}function He(r,e,t){typeof r=="string"&&(r=Ct(r));var i,a,s,l;if(r.name==="address")return He(r.rawType,e,t).toArrayLike(Buffer,"be",20).toString("hex");if(r.name==="bool")return He(r.rawType,e,t).toString()===new Pe(1).toString();if(r.name==="string"){var d=He(r.rawType,e,t);return new Buffer(d,"utf8").toString()}else if(r.isArray){for(s=[],i=r.size,r.size==="dynamic"&&(t=He("uint256",e,t).toNumber(),i=He("uint256",e,t).toNumber(),t=t+32),l=0;l<i;l++){var v=He(r.subArray,e,t);s.push(v),t+=r.subArray.memoryUsage}return s}else{if(r.name==="bytes")return t=He("uint256",e,t).toNumber(),i=He("uint256",e,t).toNumber(),e.slice(t+32,t+32+i);if(r.name.startsWith("bytes"))return e.slice(t,t+r.size);if(r.name.startsWith("uint")){if(a=new Pe(e.slice(t,t+32),16,"be"),a.bitLength()>r.size)throw new Error("Decoded int exceeds width: "+r.size+" vs "+a.bitLength());return a}else if(r.name.startsWith("int")){if(a=new Pe(e.slice(t,t+32),16,"be").fromTwos(256),a.bitLength()>r.size)throw new Error("Decoded uint exceeds width: "+r.size+" vs "+a.bitLength());return a}else if(r.name.startsWith("ufixed")){if(i=new Pe(2).pow(new Pe(r.size[1])),a=He("uint256",e,t),!a.mod(i).isZero())throw new Error("Decimals not supported yet");return a.div(i)}else if(r.name.startsWith("fixed")){if(i=new Pe(2).pow(new Pe(r.size[1])),a=He("int256",e,t),!a.mod(i).isZero())throw new Error("Decimals not supported yet");return a.div(i)}}throw new Error("Unsupported or invalid type: "+r.name)}function Ct(r){var e,t;if(jn(r)){e=Pt(r);var i=r.slice(0,r.lastIndexOf("["));return i=Ct(i),t={isArray:!0,name:r,size:e,memoryUsage:e==="dynamic"?32:i.memoryUsage*e,subArray:i},t}else{var a;switch(r){case"address":a="uint160";break;case"bool":a="uint8";break;case"string":a="bytes";break}if(t={rawType:a,name:r,memoryUsage:32},r.startsWith("bytes")&&r!=="bytes"||r.startsWith("uint")||r.startsWith("int")?t.size=Ze(r):(r.startsWith("ufixed")||r.startsWith("fixed"))&&(t.size=Rt(r)),r.startsWith("bytes")&&r!=="bytes"&&(t.size<1||t.size>32))throw new Error("Invalid bytes<N> width: "+t.size);if((r.startsWith("uint")||r.startsWith("int"))&&(t.size%8||t.size<8||t.size>256))throw new Error("Invalid int/uint<N> width: "+t.size);return t}}function Go(r){return r==="string"||r==="bytes"||Pt(r)==="dynamic"}function jn(r){return r.lastIndexOf("]")===r.length-1}be.rawEncode=function(r,e){var t=[],i=[],a=32*r.length;for(var s in r){var l=zr(r[s]),d=e[s],v=We(l,d);Go(l)?(t.push(We("uint256",a)),i.push(v),a+=v.length):t.push(v)}return Buffer.concat(t.concat(i))};be.rawDecode=function(r,e){var t=[];e=new Buffer(e);var i=0;for(var a in r){var s=zr(r[a]),l=Ct(s),d=He(l,e,i);i+=l.memoryUsage,t.push(d)}return t};be.simpleEncode=function(r){var e=Array.prototype.slice.call(arguments).slice(1),t=Wn(r);if(e.length!==t.args.length)throw new Error("Argument count mismatch");return Buffer.concat([be.methodID(t.method,t.args),be.rawEncode(t.args,e)])};be.simpleDecode=function(r,e){var t=Wn(r);if(!t.retargs)throw new Error("No return values in method");return be.rawDecode(t.retargs,e)};function Vn(r,e){return r.startsWith("address")||r.startsWith("bytes")?"0x"+e.toString("hex"):e.toString()}be.stringify=function(r,e){var t=[];for(var i in r){var a=r[i],s=e[i];/^[^\[]+\[.*\]$/.test(a)?s=s.map(function(l){return Vn(a,l)}).join(", "):s=Vn(a,s),t.push(s)}return t};be.solidityPack=function(r,e){if(r.length!==e.length)throw new Error("Number of types are not matching the values");for(var t,i,a=[],s=0;s<r.length;s++){var l=zr(r[s]),d=e[s];if(l==="bytes")a.push(d);else if(l==="string")a.push(new Buffer(d,"utf8"));else if(l==="bool")a.push(new Buffer(d?"01":"00","hex"));else if(l==="address")a.push(qe.setLengthLeft(d,20));else if(l.startsWith("bytes")){if(t=Ze(l),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);a.push(qe.setLengthRight(d,t))}else if(l.startsWith("uint")){if(t=Ze(l),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);if(i=nr(d),i.bitLength()>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+i.bitLength());a.push(i.toArrayLike(Buffer,"be",t/8))}else if(l.startsWith("int")){if(t=Ze(l),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);if(i=nr(d),i.bitLength()>t)throw new Error("Supplied int exceeds width: "+t+" vs "+i.bitLength());a.push(i.toTwos(t).toArrayLike(Buffer,"be",t/8))}else throw new Error("Unsupported or invalid type: "+l)}return Buffer.concat(a)};be.soliditySHA3=function(r,e){return qe.sha3(be.solidityPack(r,e))};be.soliditySHA256=function(r,e){return qe.sha256(be.solidityPack(r,e))};be.solidityRIPEMD160=function(r,e){return qe.ripemd160(be.solidityPack(r,e),!0)};function Ko(r){return r>="0"&&r<="9"}be.fromSerpent=function(r){for(var e=[],t=0;t<r.length;t++){var i=r[t];if(i==="s")e.push("bytes");else if(i==="b"){for(var a="bytes",s=t+1;s<r.length&&Ko(r[s]);)a+=r[s]-"0",s++;t=s-1,e.push(a)}else if(i==="i")e.push("int256");else if(i==="a")e.push("int256[]");else throw new Error("Unsupported or invalid type: "+i)}return e};be.toSerpent=function(r){for(var e=[],t=0;t<r.length;t++){var i=r[t];if(i==="bytes")e.push("s");else if(i.startsWith("bytes"))e.push("b"+Ze(i));else if(i==="int256")e.push("i");else if(i==="int256[]")e.push("a");else throw new Error("Unsupported or invalid type: "+i)}return e.join("")};var Yo=be,Jo=Yo,Gn={exports:{}};(function(r){(function(e){var t=function(o){var c,f=new Float64Array(16);if(o)for(c=0;c<o.length;c++)f[c]=o[c];return f},i=function(){throw new Error("no PRNG")},a=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var l=t(),d=t([1]),v=t([56129,1]),x=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),S=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),P=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function B(o,c,f,n){o[c]=f>>24&255,o[c+1]=f>>16&255,o[c+2]=f>>8&255,o[c+3]=f&255,o[c+4]=n>>24&255,o[c+5]=n>>16&255,o[c+6]=n>>8&255,o[c+7]=n&255}function U(o,c,f,n,u){var g,m=0;for(g=0;g<u;g++)m|=o[c+g]^f[n+g];return(1&m-1>>>8)-1}function z(o,c,f,n){return U(o,c,f,n,16)}function H(o,c,f,n){return U(o,c,f,n,32)}function ee(o,c,f,n){for(var u=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,g=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,m=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,E=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,R=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,F=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,L=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,fe=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,N=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,W=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,Z=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,J=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,V=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,Y=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,G=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,M=u,$=g,I=m,O=E,D=R,C=F,w=L,b=fe,A=N,_=W,T=j,k=Z,q=J,X=V,re=Y,Q=G,p,ne=0;ne<20;ne+=2)p=M+q|0,D^=p<<7|p>>>32-7,p=D+M|0,A^=p<<9|p>>>32-9,p=A+D|0,q^=p<<13|p>>>32-13,p=q+A|0,M^=p<<18|p>>>32-18,p=C+$|0,_^=p<<7|p>>>32-7,p=_+C|0,X^=p<<9|p>>>32-9,p=X+_|0,$^=p<<13|p>>>32-13,p=$+X|0,C^=p<<18|p>>>32-18,p=T+w|0,re^=p<<7|p>>>32-7,p=re+T|0,I^=p<<9|p>>>32-9,p=I+re|0,w^=p<<13|p>>>32-13,p=w+I|0,T^=p<<18|p>>>32-18,p=Q+k|0,O^=p<<7|p>>>32-7,p=O+Q|0,b^=p<<9|p>>>32-9,p=b+O|0,k^=p<<13|p>>>32-13,p=k+b|0,Q^=p<<18|p>>>32-18,p=M+O|0,$^=p<<7|p>>>32-7,p=$+M|0,I^=p<<9|p>>>32-9,p=I+$|0,O^=p<<13|p>>>32-13,p=O+I|0,M^=p<<18|p>>>32-18,p=C+D|0,w^=p<<7|p>>>32-7,p=w+C|0,b^=p<<9|p>>>32-9,p=b+w|0,D^=p<<13|p>>>32-13,p=D+b|0,C^=p<<18|p>>>32-18,p=T+_|0,k^=p<<7|p>>>32-7,p=k+T|0,A^=p<<9|p>>>32-9,p=A+k|0,_^=p<<13|p>>>32-13,p=_+A|0,T^=p<<18|p>>>32-18,p=Q+re|0,q^=p<<7|p>>>32-7,p=q+Q|0,X^=p<<9|p>>>32-9,p=X+q|0,re^=p<<13|p>>>32-13,p=re+X|0,Q^=p<<18|p>>>32-18;M=M+u|0,$=$+g|0,I=I+m|0,O=O+E|0,D=D+R|0,C=C+F|0,w=w+L|0,b=b+fe|0,A=A+N|0,_=_+W|0,T=T+j|0,k=k+Z|0,q=q+J|0,X=X+V|0,re=re+Y|0,Q=Q+G|0,o[0]=M>>>0&255,o[1]=M>>>8&255,o[2]=M>>>16&255,o[3]=M>>>24&255,o[4]=$>>>0&255,o[5]=$>>>8&255,o[6]=$>>>16&255,o[7]=$>>>24&255,o[8]=I>>>0&255,o[9]=I>>>8&255,o[10]=I>>>16&255,o[11]=I>>>24&255,o[12]=O>>>0&255,o[13]=O>>>8&255,o[14]=O>>>16&255,o[15]=O>>>24&255,o[16]=D>>>0&255,o[17]=D>>>8&255,o[18]=D>>>16&255,o[19]=D>>>24&255,o[20]=C>>>0&255,o[21]=C>>>8&255,o[22]=C>>>16&255,o[23]=C>>>24&255,o[24]=w>>>0&255,o[25]=w>>>8&255,o[26]=w>>>16&255,o[27]=w>>>24&255,o[28]=b>>>0&255,o[29]=b>>>8&255,o[30]=b>>>16&255,o[31]=b>>>24&255,o[32]=A>>>0&255,o[33]=A>>>8&255,o[34]=A>>>16&255,o[35]=A>>>24&255,o[36]=_>>>0&255,o[37]=_>>>8&255,o[38]=_>>>16&255,o[39]=_>>>24&255,o[40]=T>>>0&255,o[41]=T>>>8&255,o[42]=T>>>16&255,o[43]=T>>>24&255,o[44]=k>>>0&255,o[45]=k>>>8&255,o[46]=k>>>16&255,o[47]=k>>>24&255,o[48]=q>>>0&255,o[49]=q>>>8&255,o[50]=q>>>16&255,o[51]=q>>>24&255,o[52]=X>>>0&255,o[53]=X>>>8&255,o[54]=X>>>16&255,o[55]=X>>>24&255,o[56]=re>>>0&255,o[57]=re>>>8&255,o[58]=re>>>16&255,o[59]=re>>>24&255,o[60]=Q>>>0&255,o[61]=Q>>>8&255,o[62]=Q>>>16&255,o[63]=Q>>>24&255}function de(o,c,f,n){for(var u=n[0]&255|(n[1]&255)<<8|(n[2]&255)<<16|(n[3]&255)<<24,g=f[0]&255|(f[1]&255)<<8|(f[2]&255)<<16|(f[3]&255)<<24,m=f[4]&255|(f[5]&255)<<8|(f[6]&255)<<16|(f[7]&255)<<24,E=f[8]&255|(f[9]&255)<<8|(f[10]&255)<<16|(f[11]&255)<<24,R=f[12]&255|(f[13]&255)<<8|(f[14]&255)<<16|(f[15]&255)<<24,F=n[4]&255|(n[5]&255)<<8|(n[6]&255)<<16|(n[7]&255)<<24,L=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,fe=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,N=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,W=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=n[8]&255|(n[9]&255)<<8|(n[10]&255)<<16|(n[11]&255)<<24,Z=f[16]&255|(f[17]&255)<<8|(f[18]&255)<<16|(f[19]&255)<<24,J=f[20]&255|(f[21]&255)<<8|(f[22]&255)<<16|(f[23]&255)<<24,V=f[24]&255|(f[25]&255)<<8|(f[26]&255)<<16|(f[27]&255)<<24,Y=f[28]&255|(f[29]&255)<<8|(f[30]&255)<<16|(f[31]&255)<<24,G=n[12]&255|(n[13]&255)<<8|(n[14]&255)<<16|(n[15]&255)<<24,M=u,$=g,I=m,O=E,D=R,C=F,w=L,b=fe,A=N,_=W,T=j,k=Z,q=J,X=V,re=Y,Q=G,p,ne=0;ne<20;ne+=2)p=M+q|0,D^=p<<7|p>>>32-7,p=D+M|0,A^=p<<9|p>>>32-9,p=A+D|0,q^=p<<13|p>>>32-13,p=q+A|0,M^=p<<18|p>>>32-18,p=C+$|0,_^=p<<7|p>>>32-7,p=_+C|0,X^=p<<9|p>>>32-9,p=X+_|0,$^=p<<13|p>>>32-13,p=$+X|0,C^=p<<18|p>>>32-18,p=T+w|0,re^=p<<7|p>>>32-7,p=re+T|0,I^=p<<9|p>>>32-9,p=I+re|0,w^=p<<13|p>>>32-13,p=w+I|0,T^=p<<18|p>>>32-18,p=Q+k|0,O^=p<<7|p>>>32-7,p=O+Q|0,b^=p<<9|p>>>32-9,p=b+O|0,k^=p<<13|p>>>32-13,p=k+b|0,Q^=p<<18|p>>>32-18,p=M+O|0,$^=p<<7|p>>>32-7,p=$+M|0,I^=p<<9|p>>>32-9,p=I+$|0,O^=p<<13|p>>>32-13,p=O+I|0,M^=p<<18|p>>>32-18,p=C+D|0,w^=p<<7|p>>>32-7,p=w+C|0,b^=p<<9|p>>>32-9,p=b+w|0,D^=p<<13|p>>>32-13,p=D+b|0,C^=p<<18|p>>>32-18,p=T+_|0,k^=p<<7|p>>>32-7,p=k+T|0,A^=p<<9|p>>>32-9,p=A+k|0,_^=p<<13|p>>>32-13,p=_+A|0,T^=p<<18|p>>>32-18,p=Q+re|0,q^=p<<7|p>>>32-7,p=q+Q|0,X^=p<<9|p>>>32-9,p=X+q|0,re^=p<<13|p>>>32-13,p=re+X|0,Q^=p<<18|p>>>32-18;o[0]=M>>>0&255,o[1]=M>>>8&255,o[2]=M>>>16&255,o[3]=M>>>24&255,o[4]=C>>>0&255,o[5]=C>>>8&255,o[6]=C>>>16&255,o[7]=C>>>24&255,o[8]=T>>>0&255,o[9]=T>>>8&255,o[10]=T>>>16&255,o[11]=T>>>24&255,o[12]=Q>>>0&255,o[13]=Q>>>8&255,o[14]=Q>>>16&255,o[15]=Q>>>24&255,o[16]=w>>>0&255,o[17]=w>>>8&255,o[18]=w>>>16&255,o[19]=w>>>24&255,o[20]=b>>>0&255,o[21]=b>>>8&255,o[22]=b>>>16&255,o[23]=b>>>24&255,o[24]=A>>>0&255,o[25]=A>>>8&255,o[26]=A>>>16&255,o[27]=A>>>24&255,o[28]=_>>>0&255,o[29]=_>>>8&255,o[30]=_>>>16&255,o[31]=_>>>24&255}function le(o,c,f,n){ee(o,c,f,n)}function ie(o,c,f,n){de(o,c,f,n)}var ve=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function Je(o,c,f,n,u,g,m){var E=new Uint8Array(16),R=new Uint8Array(64),F,L;for(L=0;L<16;L++)E[L]=0;for(L=0;L<8;L++)E[L]=g[L];for(;u>=64;){for(le(R,E,m,ve),L=0;L<64;L++)o[c+L]=f[n+L]^R[L];for(F=1,L=8;L<16;L++)F=F+(E[L]&255)|0,E[L]=F&255,F>>>=8;u-=64,c+=64,n+=64}if(u>0)for(le(R,E,m,ve),L=0;L<u;L++)o[c+L]=f[n+L]^R[L];return 0}function Qe(o,c,f,n,u){var g=new Uint8Array(16),m=new Uint8Array(64),E,R;for(R=0;R<16;R++)g[R]=0;for(R=0;R<8;R++)g[R]=n[R];for(;f>=64;){for(le(m,g,u,ve),R=0;R<64;R++)o[c+R]=m[R];for(E=1,R=8;R<16;R++)E=E+(g[R]&255)|0,g[R]=E&255,E>>>=8;f-=64,c+=64}if(f>0)for(le(m,g,u,ve),R=0;R<f;R++)o[c+R]=m[R];return 0}function an(o,c,f,n,u){var g=new Uint8Array(32);ie(g,n,u,ve);for(var m=new Uint8Array(8),E=0;E<8;E++)m[E]=n[E+16];return Qe(o,c,f,m,g)}function rt(o,c,f,n,u,g,m){var E=new Uint8Array(32);ie(E,g,m,ve);for(var R=new Uint8Array(8),F=0;F<8;F++)R[F]=g[F+16];return Je(o,c,f,n,u,R,E)}var Rr=function(o){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var c,f,n,u,g,m,E,R;c=o[0]&255|(o[1]&255)<<8,this.r[0]=c&8191,f=o[2]&255|(o[3]&255)<<8,this.r[1]=(c>>>13|f<<3)&8191,n=o[4]&255|(o[5]&255)<<8,this.r[2]=(f>>>10|n<<6)&7939,u=o[6]&255|(o[7]&255)<<8,this.r[3]=(n>>>7|u<<9)&8191,g=o[8]&255|(o[9]&255)<<8,this.r[4]=(u>>>4|g<<12)&255,this.r[5]=g>>>1&8190,m=o[10]&255|(o[11]&255)<<8,this.r[6]=(g>>>14|m<<2)&8191,E=o[12]&255|(o[13]&255)<<8,this.r[7]=(m>>>11|E<<5)&8065,R=o[14]&255|(o[15]&255)<<8,this.r[8]=(E>>>8|R<<8)&8191,this.r[9]=R>>>5&127,this.pad[0]=o[16]&255|(o[17]&255)<<8,this.pad[1]=o[18]&255|(o[19]&255)<<8,this.pad[2]=o[20]&255|(o[21]&255)<<8,this.pad[3]=o[22]&255|(o[23]&255)<<8,this.pad[4]=o[24]&255|(o[25]&255)<<8,this.pad[5]=o[26]&255|(o[27]&255)<<8,this.pad[6]=o[28]&255|(o[29]&255)<<8,this.pad[7]=o[30]&255|(o[31]&255)<<8};Rr.prototype.blocks=function(o,c,f){for(var n=this.fin?0:1<<11,u,g,m,E,R,F,L,fe,N,W,j,Z,J,V,Y,G,M,$,I,O=this.h[0],D=this.h[1],C=this.h[2],w=this.h[3],b=this.h[4],A=this.h[5],_=this.h[6],T=this.h[7],k=this.h[8],q=this.h[9],X=this.r[0],re=this.r[1],Q=this.r[2],p=this.r[3],ne=this.r[4],ce=this.r[5],ue=this.r[6],te=this.r[7],oe=this.r[8],se=this.r[9];f>=16;)u=o[c+0]&255|(o[c+1]&255)<<8,O+=u&8191,g=o[c+2]&255|(o[c+3]&255)<<8,D+=(u>>>13|g<<3)&8191,m=o[c+4]&255|(o[c+5]&255)<<8,C+=(g>>>10|m<<6)&8191,E=o[c+6]&255|(o[c+7]&255)<<8,w+=(m>>>7|E<<9)&8191,R=o[c+8]&255|(o[c+9]&255)<<8,b+=(E>>>4|R<<12)&8191,A+=R>>>1&8191,F=o[c+10]&255|(o[c+11]&255)<<8,_+=(R>>>14|F<<2)&8191,L=o[c+12]&255|(o[c+13]&255)<<8,T+=(F>>>11|L<<5)&8191,fe=o[c+14]&255|(o[c+15]&255)<<8,k+=(L>>>8|fe<<8)&8191,q+=fe>>>5|n,N=0,W=N,W+=O*X,W+=D*(5*se),W+=C*(5*oe),W+=w*(5*te),W+=b*(5*ue),N=W>>>13,W&=8191,W+=A*(5*ce),W+=_*(5*ne),W+=T*(5*p),W+=k*(5*Q),W+=q*(5*re),N+=W>>>13,W&=8191,j=N,j+=O*re,j+=D*X,j+=C*(5*se),j+=w*(5*oe),j+=b*(5*te),N=j>>>13,j&=8191,j+=A*(5*ue),j+=_*(5*ce),j+=T*(5*ne),j+=k*(5*p),j+=q*(5*Q),N+=j>>>13,j&=8191,Z=N,Z+=O*Q,Z+=D*re,Z+=C*X,Z+=w*(5*se),Z+=b*(5*oe),N=Z>>>13,Z&=8191,Z+=A*(5*te),Z+=_*(5*ue),Z+=T*(5*ce),Z+=k*(5*ne),Z+=q*(5*p),N+=Z>>>13,Z&=8191,J=N,J+=O*p,J+=D*Q,J+=C*re,J+=w*X,J+=b*(5*se),N=J>>>13,J&=8191,J+=A*(5*oe),J+=_*(5*te),J+=T*(5*ue),J+=k*(5*ce),J+=q*(5*ne),N+=J>>>13,J&=8191,V=N,V+=O*ne,V+=D*p,V+=C*Q,V+=w*re,V+=b*X,N=V>>>13,V&=8191,V+=A*(5*se),V+=_*(5*oe),V+=T*(5*te),V+=k*(5*ue),V+=q*(5*ce),N+=V>>>13,V&=8191,Y=N,Y+=O*ce,Y+=D*ne,Y+=C*p,Y+=w*Q,Y+=b*re,N=Y>>>13,Y&=8191,Y+=A*X,Y+=_*(5*se),Y+=T*(5*oe),Y+=k*(5*te),Y+=q*(5*ue),N+=Y>>>13,Y&=8191,G=N,G+=O*ue,G+=D*ce,G+=C*ne,G+=w*p,G+=b*Q,N=G>>>13,G&=8191,G+=A*re,G+=_*X,G+=T*(5*se),G+=k*(5*oe),G+=q*(5*te),N+=G>>>13,G&=8191,M=N,M+=O*te,M+=D*ue,M+=C*ce,M+=w*ne,M+=b*p,N=M>>>13,M&=8191,M+=A*Q,M+=_*re,M+=T*X,M+=k*(5*se),M+=q*(5*oe),N+=M>>>13,M&=8191,$=N,$+=O*oe,$+=D*te,$+=C*ue,$+=w*ce,$+=b*ne,N=$>>>13,$&=8191,$+=A*p,$+=_*Q,$+=T*re,$+=k*X,$+=q*(5*se),N+=$>>>13,$&=8191,I=N,I+=O*se,I+=D*oe,I+=C*te,I+=w*ue,I+=b*ce,N=I>>>13,I&=8191,I+=A*ne,I+=_*p,I+=T*Q,I+=k*re,I+=q*X,N+=I>>>13,I&=8191,N=(N<<2)+N|0,N=N+W|0,W=N&8191,N=N>>>13,j+=N,O=W,D=j,C=Z,w=J,b=V,A=Y,_=G,T=M,k=$,q=I,c+=16,f-=16;this.h[0]=O,this.h[1]=D,this.h[2]=C,this.h[3]=w,this.h[4]=b,this.h[5]=A,this.h[6]=_,this.h[7]=T,this.h[8]=k,this.h[9]=q},Rr.prototype.finish=function(o,c){var f=new Uint16Array(10),n,u,g,m;if(this.leftover){for(m=this.leftover,this.buffer[m++]=1;m<16;m++)this.buffer[m]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,m=2;m<10;m++)this.h[m]+=n,n=this.h[m]>>>13,this.h[m]&=8191;for(this.h[0]+=n*5,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,f[0]=this.h[0]+5,n=f[0]>>>13,f[0]&=8191,m=1;m<10;m++)f[m]=this.h[m]+n,n=f[m]>>>13,f[m]&=8191;for(f[9]-=1<<13,u=(n^1)-1,m=0;m<10;m++)f[m]&=u;for(u=~u,m=0;m<10;m++)this.h[m]=this.h[m]&u|f[m];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,g=this.h[0]+this.pad[0],this.h[0]=g&65535,m=1;m<8;m++)g=(this.h[m]+this.pad[m]|0)+(g>>>16)|0,this.h[m]=g&65535;o[c+0]=this.h[0]>>>0&255,o[c+1]=this.h[0]>>>8&255,o[c+2]=this.h[1]>>>0&255,o[c+3]=this.h[1]>>>8&255,o[c+4]=this.h[2]>>>0&255,o[c+5]=this.h[2]>>>8&255,o[c+6]=this.h[3]>>>0&255,o[c+7]=this.h[3]>>>8&255,o[c+8]=this.h[4]>>>0&255,o[c+9]=this.h[4]>>>8&255,o[c+10]=this.h[5]>>>0&255,o[c+11]=this.h[5]>>>8&255,o[c+12]=this.h[6]>>>0&255,o[c+13]=this.h[6]>>>8&255,o[c+14]=this.h[7]>>>0&255,o[c+15]=this.h[7]>>>8&255},Rr.prototype.update=function(o,c,f){var n,u;if(this.leftover){for(u=16-this.leftover,u>f&&(u=f),n=0;n<u;n++)this.buffer[this.leftover+n]=o[c+n];if(f-=u,c+=u,this.leftover+=u,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(f>=16&&(u=f-f%16,this.blocks(o,c,u),c+=u,f-=u),f){for(n=0;n<f;n++)this.buffer[this.leftover+n]=o[c+n];this.leftover+=f}};function tt(o,c,f,n,u,g){var m=new Rr(g);return m.update(f,n,u),m.finish(o,c),0}function on(o,c,f,n,u,g){var m=new Uint8Array(16);return tt(m,0,f,n,u,g),z(o,c,m,0)}function nt(o,c,f,n,u){var g;if(f<32)return-1;for(rt(o,0,c,0,f,n,u),tt(o,16,o,32,f-32,o),g=0;g<16;g++)o[g]=0;return 0}function it(o,c,f,n,u){var g,m=new Uint8Array(32);if(f<32||(an(m,0,32,n,u),on(c,16,c,32,f-32,m)!==0))return-1;for(rt(o,0,c,0,f,n,u),g=0;g<32;g++)o[g]=0;return 0}function je(o,c){var f;for(f=0;f<16;f++)o[f]=c[f]|0}function at(o){var c,f,n=1;for(c=0;c<16;c++)f=o[c]+n+65535,n=Math.floor(f/65536),o[c]=f-n*65536;o[0]+=n-1+37*(n-1)}function ar(o,c,f){for(var n,u=~(f-1),g=0;g<16;g++)n=u&(o[g]^c[g]),o[g]^=n,c[g]^=n}function or(o,c){var f,n,u,g=t(),m=t();for(f=0;f<16;f++)m[f]=c[f];for(at(m),at(m),at(m),n=0;n<2;n++){for(g[0]=m[0]-65517,f=1;f<15;f++)g[f]=m[f]-65535-(g[f-1]>>16&1),g[f-1]&=65535;g[15]=m[15]-32767-(g[14]>>16&1),u=g[15]>>16&1,g[14]&=65535,ar(m,g,1-u)}for(f=0;f<16;f++)o[2*f]=m[f]&255,o[2*f+1]=m[f]>>8}function sn(o,c){var f=new Uint8Array(32),n=new Uint8Array(32);return or(f,o),or(n,c),H(f,0,n,0)}function fn(o){var c=new Uint8Array(32);return or(c,o),c[0]&1}function ot(o,c){var f;for(f=0;f<16;f++)o[f]=c[2*f]+(c[2*f+1]<<8);o[15]&=32767}function Oe(o,c,f){for(var n=0;n<16;n++)o[n]=c[n]+f[n]}function De(o,c,f){for(var n=0;n<16;n++)o[n]=c[n]-f[n]}function ae(o,c,f){var n,u,g=0,m=0,E=0,R=0,F=0,L=0,fe=0,N=0,W=0,j=0,Z=0,J=0,V=0,Y=0,G=0,M=0,$=0,I=0,O=0,D=0,C=0,w=0,b=0,A=0,_=0,T=0,k=0,q=0,X=0,re=0,Q=0,p=f[0],ne=f[1],ce=f[2],ue=f[3],te=f[4],oe=f[5],se=f[6],we=f[7],he=f[8],ge=f[9],me=f[10],ye=f[11],Te=f[12],Se=f[13],ke=f[14],Re=f[15];n=c[0],g+=n*p,m+=n*ne,E+=n*ce,R+=n*ue,F+=n*te,L+=n*oe,fe+=n*se,N+=n*we,W+=n*he,j+=n*ge,Z+=n*me,J+=n*ye,V+=n*Te,Y+=n*Se,G+=n*ke,M+=n*Re,n=c[1],m+=n*p,E+=n*ne,R+=n*ce,F+=n*ue,L+=n*te,fe+=n*oe,N+=n*se,W+=n*we,j+=n*he,Z+=n*ge,J+=n*me,V+=n*ye,Y+=n*Te,G+=n*Se,M+=n*ke,$+=n*Re,n=c[2],E+=n*p,R+=n*ne,F+=n*ce,L+=n*ue,fe+=n*te,N+=n*oe,W+=n*se,j+=n*we,Z+=n*he,J+=n*ge,V+=n*me,Y+=n*ye,G+=n*Te,M+=n*Se,$+=n*ke,I+=n*Re,n=c[3],R+=n*p,F+=n*ne,L+=n*ce,fe+=n*ue,N+=n*te,W+=n*oe,j+=n*se,Z+=n*we,J+=n*he,V+=n*ge,Y+=n*me,G+=n*ye,M+=n*Te,$+=n*Se,I+=n*ke,O+=n*Re,n=c[4],F+=n*p,L+=n*ne,fe+=n*ce,N+=n*ue,W+=n*te,j+=n*oe,Z+=n*se,J+=n*we,V+=n*he,Y+=n*ge,G+=n*me,M+=n*ye,$+=n*Te,I+=n*Se,O+=n*ke,D+=n*Re,n=c[5],L+=n*p,fe+=n*ne,N+=n*ce,W+=n*ue,j+=n*te,Z+=n*oe,J+=n*se,V+=n*we,Y+=n*he,G+=n*ge,M+=n*me,$+=n*ye,I+=n*Te,O+=n*Se,D+=n*ke,C+=n*Re,n=c[6],fe+=n*p,N+=n*ne,W+=n*ce,j+=n*ue,Z+=n*te,J+=n*oe,V+=n*se,Y+=n*we,G+=n*he,M+=n*ge,$+=n*me,I+=n*ye,O+=n*Te,D+=n*Se,C+=n*ke,w+=n*Re,n=c[7],N+=n*p,W+=n*ne,j+=n*ce,Z+=n*ue,J+=n*te,V+=n*oe,Y+=n*se,G+=n*we,M+=n*he,$+=n*ge,I+=n*me,O+=n*ye,D+=n*Te,C+=n*Se,w+=n*ke,b+=n*Re,n=c[8],W+=n*p,j+=n*ne,Z+=n*ce,J+=n*ue,V+=n*te,Y+=n*oe,G+=n*se,M+=n*we,$+=n*he,I+=n*ge,O+=n*me,D+=n*ye,C+=n*Te,w+=n*Se,b+=n*ke,A+=n*Re,n=c[9],j+=n*p,Z+=n*ne,J+=n*ce,V+=n*ue,Y+=n*te,G+=n*oe,M+=n*se,$+=n*we,I+=n*he,O+=n*ge,D+=n*me,C+=n*ye,w+=n*Te,b+=n*Se,A+=n*ke,_+=n*Re,n=c[10],Z+=n*p,J+=n*ne,V+=n*ce,Y+=n*ue,G+=n*te,M+=n*oe,$+=n*se,I+=n*we,O+=n*he,D+=n*ge,C+=n*me,w+=n*ye,b+=n*Te,A+=n*Se,_+=n*ke,T+=n*Re,n=c[11],J+=n*p,V+=n*ne,Y+=n*ce,G+=n*ue,M+=n*te,$+=n*oe,I+=n*se,O+=n*we,D+=n*he,C+=n*ge,w+=n*me,b+=n*ye,A+=n*Te,_+=n*Se,T+=n*ke,k+=n*Re,n=c[12],V+=n*p,Y+=n*ne,G+=n*ce,M+=n*ue,$+=n*te,I+=n*oe,O+=n*se,D+=n*we,C+=n*he,w+=n*ge,b+=n*me,A+=n*ye,_+=n*Te,T+=n*Se,k+=n*ke,q+=n*Re,n=c[13],Y+=n*p,G+=n*ne,M+=n*ce,$+=n*ue,I+=n*te,O+=n*oe,D+=n*se,C+=n*we,w+=n*he,b+=n*ge,A+=n*me,_+=n*ye,T+=n*Te,k+=n*Se,q+=n*ke,X+=n*Re,n=c[14],G+=n*p,M+=n*ne,$+=n*ce,I+=n*ue,O+=n*te,D+=n*oe,C+=n*se,w+=n*we,b+=n*he,A+=n*ge,_+=n*me,T+=n*ye,k+=n*Te,q+=n*Se,X+=n*ke,re+=n*Re,n=c[15],M+=n*p,$+=n*ne,I+=n*ce,O+=n*ue,D+=n*te,C+=n*oe,w+=n*se,b+=n*we,A+=n*he,_+=n*ge,T+=n*me,k+=n*ye,q+=n*Te,X+=n*Se,re+=n*ke,Q+=n*Re,g+=38*$,m+=38*I,E+=38*O,R+=38*D,F+=38*C,L+=38*w,fe+=38*b,N+=38*A,W+=38*_,j+=38*T,Z+=38*k,J+=38*q,V+=38*X,Y+=38*re,G+=38*Q,u=1,n=g+u+65535,u=Math.floor(n/65536),g=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=E+u+65535,u=Math.floor(n/65536),E=n-u*65536,n=R+u+65535,u=Math.floor(n/65536),R=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=fe+u+65535,u=Math.floor(n/65536),fe=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=W+u+65535,u=Math.floor(n/65536),W=n-u*65536,n=j+u+65535,u=Math.floor(n/65536),j=n-u*65536,n=Z+u+65535,u=Math.floor(n/65536),Z=n-u*65536,n=J+u+65535,u=Math.floor(n/65536),J=n-u*65536,n=V+u+65535,u=Math.floor(n/65536),V=n-u*65536,n=Y+u+65535,u=Math.floor(n/65536),Y=n-u*65536,n=G+u+65535,u=Math.floor(n/65536),G=n-u*65536,n=M+u+65535,u=Math.floor(n/65536),M=n-u*65536,g+=u-1+37*(u-1),u=1,n=g+u+65535,u=Math.floor(n/65536),g=n-u*65536,n=m+u+65535,u=Math.floor(n/65536),m=n-u*65536,n=E+u+65535,u=Math.floor(n/65536),E=n-u*65536,n=R+u+65535,u=Math.floor(n/65536),R=n-u*65536,n=F+u+65535,u=Math.floor(n/65536),F=n-u*65536,n=L+u+65535,u=Math.floor(n/65536),L=n-u*65536,n=fe+u+65535,u=Math.floor(n/65536),fe=n-u*65536,n=N+u+65535,u=Math.floor(n/65536),N=n-u*65536,n=W+u+65535,u=Math.floor(n/65536),W=n-u*65536,n=j+u+65535,u=Math.floor(n/65536),j=n-u*65536,n=Z+u+65535,u=Math.floor(n/65536),Z=n-u*65536,n=J+u+65535,u=Math.floor(n/65536),J=n-u*65536,n=V+u+65535,u=Math.floor(n/65536),V=n-u*65536,n=Y+u+65535,u=Math.floor(n/65536),Y=n-u*65536,n=G+u+65535,u=Math.floor(n/65536),G=n-u*65536,n=M+u+65535,u=Math.floor(n/65536),M=n-u*65536,g+=u-1+37*(u-1),o[0]=g,o[1]=m,o[2]=E,o[3]=R,o[4]=F,o[5]=L,o[6]=fe,o[7]=N,o[8]=W,o[9]=j,o[10]=Z,o[11]=J,o[12]=V,o[13]=Y,o[14]=G,o[15]=M}function Ne(o,c){ae(o,c,c)}function cn(o,c){var f=t(),n;for(n=0;n<16;n++)f[n]=c[n];for(n=253;n>=0;n--)Ne(f,f),n!==2&&n!==4&&ae(f,f,c);for(n=0;n<16;n++)o[n]=f[n]}function un(o,c){var f=t(),n;for(n=0;n<16;n++)f[n]=c[n];for(n=250;n>=0;n--)Ne(f,f),n!==1&&ae(f,f,c);for(n=0;n<16;n++)o[n]=f[n]}function Pr(o,c,f){var n=new Uint8Array(32),u=new Float64Array(80),g,m,E=t(),R=t(),F=t(),L=t(),fe=t(),N=t();for(m=0;m<31;m++)n[m]=c[m];for(n[31]=c[31]&127|64,n[0]&=248,ot(u,f),m=0;m<16;m++)R[m]=u[m],L[m]=E[m]=F[m]=0;for(E[0]=L[0]=1,m=254;m>=0;--m)g=n[m>>>3]>>>(m&7)&1,ar(E,R,g),ar(F,L,g),Oe(fe,E,F),De(E,E,F),Oe(F,R,L),De(R,R,L),Ne(L,fe),Ne(N,E),ae(E,F,E),ae(F,R,fe),Oe(fe,E,F),De(E,E,F),Ne(R,E),De(F,L,N),ae(E,F,v),Oe(E,E,L),ae(F,F,E),ae(E,L,N),ae(L,R,u),Ne(R,fe),ar(E,R,g),ar(F,L,g);for(m=0;m<16;m++)u[m+16]=E[m],u[m+32]=F[m],u[m+48]=R[m],u[m+64]=L[m];var W=u.subarray(32),j=u.subarray(16);return cn(W,W),ae(j,j,W),or(o,j),0}function Cr(o,c){return Pr(o,c,s)}function ln(o,c){return i(c,32),Cr(o,c)}function Lr(o,c,f){var n=new Uint8Array(32);return Pr(n,f,c),ie(o,a,n,ve)}var hn=nt,Zi=it;function Xi(o,c,f,n,u,g){var m=new Uint8Array(32);return Lr(m,u,g),hn(o,c,f,n,m)}function Qi(o,c,f,n,u,g){var m=new Uint8Array(32);return Lr(m,u,g),Zi(o,c,f,n,m)}var dn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function xn(o,c,f,n){for(var u=new Int32Array(16),g=new Int32Array(16),m,E,R,F,L,fe,N,W,j,Z,J,V,Y,G,M,$,I,O,D,C,w,b,A,_,T,k,q=o[0],X=o[1],re=o[2],Q=o[3],p=o[4],ne=o[5],ce=o[6],ue=o[7],te=c[0],oe=c[1],se=c[2],we=c[3],he=c[4],ge=c[5],me=c[6],ye=c[7],Te=0;n>=128;){for(D=0;D<16;D++)C=8*D+Te,u[D]=f[C+0]<<24|f[C+1]<<16|f[C+2]<<8|f[C+3],g[D]=f[C+4]<<24|f[C+5]<<16|f[C+6]<<8|f[C+7];for(D=0;D<80;D++)if(m=q,E=X,R=re,F=Q,L=p,fe=ne,N=ce,W=ue,j=te,Z=oe,J=se,V=we,Y=he,G=ge,M=me,$=ye,w=ue,b=ye,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=(p>>>14|he<<32-14)^(p>>>18|he<<32-18)^(he>>>41-32|p<<32-(41-32)),b=(he>>>14|p<<32-14)^(he>>>18|p<<32-18)^(p>>>41-32|he<<32-(41-32)),A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,w=p&ne^~p&ce,b=he&ge^~he&me,A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,w=dn[D*2],b=dn[D*2+1],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,w=u[D%16],b=g[D%16],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,I=T&65535|k<<16,O=A&65535|_<<16,w=I,b=O,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=(q>>>28|te<<32-28)^(te>>>34-32|q<<32-(34-32))^(te>>>39-32|q<<32-(39-32)),b=(te>>>28|q<<32-28)^(q>>>34-32|te<<32-(34-32))^(q>>>39-32|te<<32-(39-32)),A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,w=q&X^q&re^X&re,b=te&oe^te&se^oe&se,A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,W=T&65535|k<<16,$=A&65535|_<<16,w=F,b=V,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=I,b=O,A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,F=T&65535|k<<16,V=A&65535|_<<16,X=m,re=E,Q=R,p=F,ne=L,ce=fe,ue=N,q=W,oe=j,se=Z,we=J,he=V,ge=Y,me=G,ye=M,te=$,D%16==15)for(C=0;C<16;C++)w=u[C],b=g[C],A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=u[(C+9)%16],b=g[(C+9)%16],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,I=u[(C+1)%16],O=g[(C+1)%16],w=(I>>>1|O<<32-1)^(I>>>8|O<<32-8)^I>>>7,b=(O>>>1|I<<32-1)^(O>>>8|I<<32-8)^(O>>>7|I<<32-7),A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,I=u[(C+14)%16],O=g[(C+14)%16],w=(I>>>19|O<<32-19)^(O>>>61-32|I<<32-(61-32))^I>>>6,b=(O>>>19|I<<32-19)^(I>>>61-32|O<<32-(61-32))^(O>>>6|I<<32-6),A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,u[C]=T&65535|k<<16,g[C]=A&65535|_<<16;w=q,b=te,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[0],b=c[0],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[0]=q=T&65535|k<<16,c[0]=te=A&65535|_<<16,w=X,b=oe,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[1],b=c[1],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[1]=X=T&65535|k<<16,c[1]=oe=A&65535|_<<16,w=re,b=se,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[2],b=c[2],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[2]=re=T&65535|k<<16,c[2]=se=A&65535|_<<16,w=Q,b=we,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[3],b=c[3],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[3]=Q=T&65535|k<<16,c[3]=we=A&65535|_<<16,w=p,b=he,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[4],b=c[4],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[4]=p=T&65535|k<<16,c[4]=he=A&65535|_<<16,w=ne,b=ge,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[5],b=c[5],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[5]=ne=T&65535|k<<16,c[5]=ge=A&65535|_<<16,w=ce,b=me,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[6],b=c[6],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[6]=ce=T&65535|k<<16,c[6]=me=A&65535|_<<16,w=ue,b=ye,A=b&65535,_=b>>>16,T=w&65535,k=w>>>16,w=o[7],b=c[7],A+=b&65535,_+=b>>>16,T+=w&65535,k+=w>>>16,_+=A>>>16,T+=_>>>16,k+=T>>>16,o[7]=ue=T&65535|k<<16,c[7]=ye=A&65535|_<<16,Te+=128,n-=128}return n}function er(o,c,f){var n=new Int32Array(8),u=new Int32Array(8),g=new Uint8Array(256),m,E=f;for(n[0]=1779033703,n[1]=3144134277,n[2]=1013904242,n[3]=2773480762,n[4]=1359893119,n[5]=2600822924,n[6]=528734635,n[7]=1541459225,u[0]=4089235720,u[1]=2227873595,u[2]=4271175723,u[3]=1595750129,u[4]=2917565137,u[5]=725511199,u[6]=4215389547,u[7]=327033209,xn(n,u,c,f),f%=128,m=0;m<f;m++)g[m]=c[E-f+m];for(g[f]=128,f=256-128*(f<112?1:0),g[f-9]=0,B(g,f-8,E/536870912|0,E<<3),xn(n,u,g,f),m=0;m<8;m++)B(o,8*m,n[m],u[m]);return 0}function Ur(o,c){var f=t(),n=t(),u=t(),g=t(),m=t(),E=t(),R=t(),F=t(),L=t();De(f,o[1],o[0]),De(L,c[1],c[0]),ae(f,f,L),Oe(n,o[0],o[1]),Oe(L,c[0],c[1]),ae(n,n,L),ae(u,o[3],c[3]),ae(u,u,y),ae(g,o[2],c[2]),Oe(g,g,g),De(m,n,f),De(E,g,u),Oe(R,g,u),Oe(F,n,f),ae(o[0],m,E),ae(o[1],F,R),ae(o[2],R,E),ae(o[3],m,F)}function pn(o,c,f){var n;for(n=0;n<4;n++)ar(o[n],c[n],f)}function st(o,c){var f=t(),n=t(),u=t();cn(u,c[2]),ae(f,c[0],u),ae(n,c[1],u),or(o,n),o[31]^=fn(f)<<7}function ft(o,c,f){var n,u;for(je(o[0],l),je(o[1],d),je(o[2],d),je(o[3],l),u=255;u>=0;--u)n=f[u/8|0]>>(u&7)&1,pn(o,c,n),Ur(c,o),Ur(o,o),pn(o,c,n)}function Ir(o,c){var f=[t(),t(),t(),t()];je(f[0],S),je(f[1],P),je(f[2],d),ae(f[3],S,P),ft(o,f,c)}function ct(o,c,f){var n=new Uint8Array(64),u=[t(),t(),t(),t()],g;for(f||i(c,32),er(n,c,32),n[0]&=248,n[31]&=127,n[31]|=64,Ir(u,n),st(o,u),g=0;g<32;g++)c[g+32]=o[g];return 0}var Nr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ut(o,c){var f,n,u,g;for(n=63;n>=32;--n){for(f=0,u=n-32,g=n-12;u<g;++u)c[u]+=f-16*c[n]*Nr[u-(n-32)],f=Math.floor((c[u]+128)/256),c[u]-=f*256;c[u]+=f,c[n]=0}for(f=0,u=0;u<32;u++)c[u]+=f-(c[31]>>4)*Nr[u],f=c[u]>>8,c[u]&=255;for(u=0;u<32;u++)c[u]-=f*Nr[u];for(n=0;n<32;n++)c[n+1]+=c[n]>>8,o[n]=c[n]&255}function lt(o){var c=new Float64Array(64),f;for(f=0;f<64;f++)c[f]=o[f];for(f=0;f<64;f++)o[f]=0;ut(o,c)}function vn(o,c,f,n){var u=new Uint8Array(64),g=new Uint8Array(64),m=new Uint8Array(64),E,R,F=new Float64Array(64),L=[t(),t(),t(),t()];er(u,n,32),u[0]&=248,u[31]&=127,u[31]|=64;var fe=f+64;for(E=0;E<f;E++)o[64+E]=c[E];for(E=0;E<32;E++)o[32+E]=u[32+E];for(er(m,o.subarray(32),f+32),lt(m),Ir(L,m),st(o,L),E=32;E<64;E++)o[E]=n[E];for(er(g,o,f+64),lt(g),E=0;E<64;E++)F[E]=0;for(E=0;E<32;E++)F[E]=m[E];for(E=0;E<32;E++)for(R=0;R<32;R++)F[E+R]+=g[E]*u[R];return ut(o.subarray(32),F),fe}function ea(o,c){var f=t(),n=t(),u=t(),g=t(),m=t(),E=t(),R=t();return je(o[2],d),ot(o[1],c),Ne(u,o[1]),ae(g,u,x),De(u,u,o[2]),Oe(g,o[2],g),Ne(m,g),Ne(E,m),ae(R,E,m),ae(f,R,u),ae(f,f,g),un(f,f),ae(f,f,u),ae(f,f,g),ae(f,f,g),ae(o[0],f,g),Ne(n,o[0]),ae(n,n,g),sn(n,u)&&ae(o[0],o[0],h),Ne(n,o[0]),ae(n,n,g),sn(n,u)?-1:(fn(o[0])===c[31]>>7&&De(o[0],l,o[0]),ae(o[3],o[0],o[1]),0)}function ht(o,c,f,n){var u,g=new Uint8Array(32),m=new Uint8Array(64),E=[t(),t(),t(),t()],R=[t(),t(),t(),t()];if(f<64||ea(R,n))return-1;for(u=0;u<f;u++)o[u]=c[u];for(u=0;u<32;u++)o[u+32]=n[u];if(er(m,o,f),lt(m),ft(E,R,m),Ir(R,c.subarray(32)),Ur(E,R),st(g,E),f-=64,H(c,0,g,0)){for(u=0;u<f;u++)o[u]=0;return-1}for(u=0;u<f;u++)o[u]=c[u+64];return f}var dt=32,Mr=24,gr=32,sr=16,mr=32,Or=32,yr=32,wr=32,xt=32,gn=Mr,ra=gr,ta=sr,Ve=64,rr=32,fr=64,pt=32,vt=64;e.lowlevel={crypto_core_hsalsa20:ie,crypto_stream_xor:rt,crypto_stream:an,crypto_stream_salsa20_xor:Je,crypto_stream_salsa20:Qe,crypto_onetimeauth:tt,crypto_onetimeauth_verify:on,crypto_verify_16:z,crypto_verify_32:H,crypto_secretbox:nt,crypto_secretbox_open:it,crypto_scalarmult:Pr,crypto_scalarmult_base:Cr,crypto_box_beforenm:Lr,crypto_box_afternm:hn,crypto_box:Xi,crypto_box_open:Qi,crypto_box_keypair:ln,crypto_hash:er,crypto_sign:vn,crypto_sign_keypair:ct,crypto_sign_open:ht,crypto_secretbox_KEYBYTES:dt,crypto_secretbox_NONCEBYTES:Mr,crypto_secretbox_ZEROBYTES:gr,crypto_secretbox_BOXZEROBYTES:sr,crypto_scalarmult_BYTES:mr,crypto_scalarmult_SCALARBYTES:Or,crypto_box_PUBLICKEYBYTES:yr,crypto_box_SECRETKEYBYTES:wr,crypto_box_BEFORENMBYTES:xt,crypto_box_NONCEBYTES:gn,crypto_box_ZEROBYTES:ra,crypto_box_BOXZEROBYTES:ta,crypto_sign_BYTES:Ve,crypto_sign_PUBLICKEYBYTES:rr,crypto_sign_SECRETKEYBYTES:fr,crypto_sign_SEEDBYTES:pt,crypto_hash_BYTES:vt,gf:t,D:x,L:Nr,pack25519:or,unpack25519:ot,M:ae,A:Oe,S:Ne,Z:De,pow2523:un,add:Ur,set25519:je,modL:ut,scalarmult:ft,scalarbase:Ir};function mn(o,c){if(o.length!==dt)throw new Error("bad key size");if(c.length!==Mr)throw new Error("bad nonce size")}function na(o,c){if(o.length!==yr)throw new Error("bad public key size");if(c.length!==wr)throw new Error("bad secret key size")}function Ue(){for(var o=0;o<arguments.length;o++)if(!(arguments[o]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function yn(o){for(var c=0;c<o.length;c++)o[c]=0}e.randomBytes=function(o){var c=new Uint8Array(o);return i(c,o),c},e.secretbox=function(o,c,f){Ue(o,c,f),mn(f,c);for(var n=new Uint8Array(gr+o.length),u=new Uint8Array(n.length),g=0;g<o.length;g++)n[g+gr]=o[g];return nt(u,n,n.length,c,f),u.subarray(sr)},e.secretbox.open=function(o,c,f){Ue(o,c,f),mn(f,c);for(var n=new Uint8Array(sr+o.length),u=new Uint8Array(n.length),g=0;g<o.length;g++)n[g+sr]=o[g];return n.length<32||it(u,n,n.length,c,f)!==0?null:u.subarray(gr)},e.secretbox.keyLength=dt,e.secretbox.nonceLength=Mr,e.secretbox.overheadLength=sr,e.scalarMult=function(o,c){if(Ue(o,c),o.length!==Or)throw new Error("bad n size");if(c.length!==mr)throw new Error("bad p size");var f=new Uint8Array(mr);return Pr(f,o,c),f},e.scalarMult.base=function(o){if(Ue(o),o.length!==Or)throw new Error("bad n size");var c=new Uint8Array(mr);return Cr(c,o),c},e.scalarMult.scalarLength=Or,e.scalarMult.groupElementLength=mr,e.box=function(o,c,f,n){var u=e.box.before(f,n);return e.secretbox(o,c,u)},e.box.before=function(o,c){Ue(o,c),na(o,c);var f=new Uint8Array(xt);return Lr(f,o,c),f},e.box.after=e.secretbox,e.box.open=function(o,c,f,n){var u=e.box.before(f,n);return e.secretbox.open(o,c,u)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var o=new Uint8Array(yr),c=new Uint8Array(wr);return ln(o,c),{publicKey:o,secretKey:c}},e.box.keyPair.fromSecretKey=function(o){if(Ue(o),o.length!==wr)throw new Error("bad secret key size");var c=new Uint8Array(yr);return Cr(c,o),{publicKey:c,secretKey:new Uint8Array(o)}},e.box.publicKeyLength=yr,e.box.secretKeyLength=wr,e.box.sharedKeyLength=xt,e.box.nonceLength=gn,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(o,c){if(Ue(o,c),c.length!==fr)throw new Error("bad secret key size");var f=new Uint8Array(Ve+o.length);return vn(f,o,o.length,c),f},e.sign.open=function(o,c){if(Ue(o,c),c.length!==rr)throw new Error("bad public key size");var f=new Uint8Array(o.length),n=ht(f,o,o.length,c);if(n<0)return null;for(var u=new Uint8Array(n),g=0;g<u.length;g++)u[g]=f[g];return u},e.sign.detached=function(o,c){for(var f=e.sign(o,c),n=new Uint8Array(Ve),u=0;u<n.length;u++)n[u]=f[u];return n},e.sign.detached.verify=function(o,c,f){if(Ue(o,c,f),c.length!==Ve)throw new Error("bad signature size");if(f.length!==rr)throw new Error("bad public key size");var n=new Uint8Array(Ve+o.length),u=new Uint8Array(Ve+o.length),g;for(g=0;g<Ve;g++)n[g]=c[g];for(g=0;g<o.length;g++)n[g+Ve]=o[g];return ht(u,n,n.length,f)>=0},e.sign.keyPair=function(){var o=new Uint8Array(rr),c=new Uint8Array(fr);return ct(o,c),{publicKey:o,secretKey:c}},e.sign.keyPair.fromSecretKey=function(o){if(Ue(o),o.length!==fr)throw new Error("bad secret key size");for(var c=new Uint8Array(rr),f=0;f<c.length;f++)c[f]=o[32+f];return{publicKey:c,secretKey:new Uint8Array(o)}},e.sign.keyPair.fromSeed=function(o){if(Ue(o),o.length!==pt)throw new Error("bad seed size");for(var c=new Uint8Array(rr),f=new Uint8Array(fr),n=0;n<32;n++)f[n]=o[n];return ct(c,f,!0),{publicKey:c,secretKey:f}},e.sign.publicKeyLength=rr,e.sign.secretKeyLength=fr,e.sign.seedLength=pt,e.sign.signatureLength=Ve,e.hash=function(o){Ue(o);var c=new Uint8Array(vt);return er(c,o,o.length),c},e.hash.hashLength=vt,e.verify=function(o,c){return Ue(o,c),o.length===0||c.length===0||o.length!==c.length?!1:U(o,0,c,0,o.length)===0},e.setPRNG=function(o){i=o},function(){var o=typeof self!="undefined"?self.crypto||self.msCrypto:null;if(o&&o.getRandomValues){var c=65536;e.setPRNG(function(f,n){var u,g=new Uint8Array(n);for(u=0;u<n;u+=c)o.getRandomValues(g.subarray(u,u+Math.min(n-u,c)));for(u=0;u<n;u++)f[u]=g[u];yn(g)})}else typeof wa!="undefined"&&(o=An,o&&o.randomBytes&&e.setPRNG(function(f,n){var u,g=o.randomBytes(n);for(u=0;u<n;u++)f[u]=g[u];yn(g)}))}()})(r.exports?r.exports:self.nacl=self.nacl||{})})(Gn);var Kn={exports:{}};(function(r){(function(e,t){r.exports?r.exports=t():(e.nacl||(e.nacl={}),e.nacl.util=t())})(mt,function(){var e={};function t(i){if(!/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(i))throw new TypeError("invalid encoding")}return e.decodeUTF8=function(i){if(typeof i!="string")throw new TypeError("expected string");var a,s=unescape(encodeURIComponent(i)),l=new Uint8Array(s.length);for(a=0;a<s.length;a++)l[a]=s.charCodeAt(a);return l},e.encodeUTF8=function(i){var a,s=[];for(a=0;a<i.length;a++)s.push(String.fromCharCode(i[a]));return decodeURIComponent(escape(s.join("")))},typeof atob=="undefined"?typeof Buffer.from!="undefined"?(e.encodeBase64=function(i){return Buffer.from(i).toString("base64")},e.decodeBase64=function(i){return t(i),new Uint8Array(Array.prototype.slice.call(Buffer.from(i,"base64"),0))}):(e.encodeBase64=function(i){return new Buffer(i).toString("base64")},e.decodeBase64=function(i){return t(i),new Uint8Array(Array.prototype.slice.call(new Buffer(i,"base64"),0))}):(e.encodeBase64=function(i){var a,s=[],l=i.length;for(a=0;a<l;a++)s.push(String.fromCharCode(i[a]));return btoa(s.join(""))},e.decodeBase64=function(i){t(i);var a,s=atob(i),l=new Uint8Array(s.length);for(a=0;a<s.length;a++)l[a]=s.charCodeAt(a);return l}),e})})(Kn);var Lt=mt&&mt.__assign||function(){return Lt=Object.assign||function(r){for(var e,t=1,i=arguments.length;t<i;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},Lt.apply(this,arguments)};Object.defineProperty(pe,"__esModule",{value:!0});var K=Dr,Tr=Jo,ir=Gn.exports,Fe=Kn.exports,Yn={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]};pe.TYPED_MESSAGE_SCHEMA=Yn;var Br={encodeData:function(r,e,t,i){var a=this;i===void 0&&(i=!0);var s=["bytes32"],l=[this.hashType(r,t)];if(i)for(var d=function(z,H,ee){if(t[H]!==void 0)return["bytes32",ee==null?"0x0000000000000000000000000000000000000000000000000000000000000000":K.sha3(a.encodeData(H,ee,t,i))];if(ee===void 0)throw new Error("missing value for field "+z+" of type "+H);if(H==="bytes")return["bytes32",K.sha3(ee)];if(H==="string")return typeof ee=="string"&&(ee=Buffer.from(ee,"utf8")),["bytes32",K.sha3(ee)];if(H.lastIndexOf("]")===H.length-1){var de=H.slice(0,H.lastIndexOf("[")),le=ee.map(function(ie){return d(z,de,ie)});return["bytes32",K.sha3(Tr.rawEncode(le.map(function(ie){var ve=ie[0];return ve}),le.map(function(ie){var ve=ie[1];return ve})))]}return[H,ee]},v=0,x=t[r];v<x.length;v++){var y=x[v],S=d(y.name,y.type,e[y.name]),P=S[0],h=S[1];s.push(P),l.push(h)}else for(var B=0,U=t[r];B<U.length;B++){var y=U[B],h=e[y.name];if(h!==void 0)if(y.type==="bytes")s.push("bytes32"),h=K.sha3(h),l.push(h);else if(y.type==="string")s.push("bytes32"),typeof h=="string"&&(h=Buffer.from(h,"utf8")),h=K.sha3(h),l.push(h);else if(t[y.type]!==void 0)s.push("bytes32"),h=K.sha3(this.encodeData(y.type,h,t,i)),l.push(h);else{if(y.type.lastIndexOf("]")===y.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");s.push(y.type),l.push(h)}}return Tr.rawEncode(s,l)},encodeType:function(r,e){var t="",i=this.findTypeDependencies(r,e).filter(function(v){return v!==r});i=[r].concat(i.sort());for(var a=0,s=i;a<s.length;a++){var l=s[a],d=e[l];if(!d)throw new Error("No type definition specified: "+l);t+=l+"("+e[l].map(function(v){var x=v.name,y=v.type;return y+" "+x}).join(",")+")"}return t},findTypeDependencies:function(r,e,t){if(t===void 0&&(t=[]),r=r.match(/^\w*/u)[0],t.includes(r)||e[r]===void 0)return t;t.push(r);for(var i=0,a=e[r];i<a.length;i++)for(var s=a[i],l=0,d=this.findTypeDependencies(s.type,e,t);l<d.length;l++){var v=d[l];!t.includes(v)&&t.push(v)}return t},hashStruct:function(r,e,t,i){return i===void 0&&(i=!0),K.sha3(this.encodeData(r,e,t,i))},hashType:function(r,e){return K.sha3(this.encodeType(r,e))},sanitizeData:function(r){var e={};for(var t in Yn.properties)r[t]&&(e[t]=r[t]);return"types"in e&&(e.types=Lt({EIP712Domain:[]},e.types)),e},sign:function(r,e){e===void 0&&(e=!0);var t=this.sanitizeData(r),i=[Buffer.from("1901","hex")];return i.push(this.hashStruct("EIP712Domain",t.domain,t.types,e)),t.primaryType!=="EIP712Domain"&&i.push(this.hashStruct(t.primaryType,t.message,t.types,e)),K.sha3(Buffer.concat(i))}};pe.TypedDataUtils=Br;function Ar(r,e,t){var i=K.fromSigned(e),a=K.fromSigned(t),s=K.bufferToInt(r),l=ai(K.toUnsigned(i).toString("hex"),64),d=ai(K.toUnsigned(a).toString("hex"),64),v=K.stripHexPrefix(K.intToHex(s));return K.addHexPrefix(l.concat(d,v)).toString("hex")}pe.concatSig=Ar;function Zo(r){if(!!r){if(typeof r=="number"){var e=K.toBuffer(r);r=K.bufferToHex(e)}if(typeof r!="string"){var t="eth-sig-util.normalize() requires hex string or integer input.";throw t+=" received "+typeof r+": "+r,new Error(t)}return K.addHexPrefix(r.toLowerCase())}}pe.normalize=Zo;function Xo(r,e){var t=K.toBuffer(e.data),i=K.hashPersonalMessage(t),a=K.ecsign(i,r),s=K.bufferToHex(Ar(a.v,a.r,a.s));return s}pe.personalSign=Xo;function Qo(r){var e=ii(r),t=K.publicToAddress(e),i=K.bufferToHex(t);return i}pe.recoverPersonalSignature=Qo;function es(r){var e=ii(r);return"0x"+e.toString("hex")}pe.extractPublicKey=es;function rs(r){var e=Ut(r);return K.bufferToHex(e)}pe.typedSignatureHash=rs;function Jn(r,e){var t=Ut(e.data),i=K.ecsign(t,r);return K.bufferToHex(Ar(i.v,i.r,i.s))}pe.signTypedDataLegacy=Jn;function Zn(r){var e=Ut(r.data),t=qr(e,r.sig),i=K.publicToAddress(t);return K.bufferToHex(i)}pe.recoverTypedSignatureLegacy=Zn;function Xn(r,e,t){switch(t){case"x25519-xsalsa20-poly1305":{if(typeof e.data!="string")throw new Error('Cannot detect secret message, message params should be of the form {data: "secret message"} ');var i=ir.box.keyPair(),a=void 0;try{a=Fe.decodeBase64(r)}catch{throw new Error("Bad public key")}var s=Fe.decodeUTF8(e.data),l=ir.randomBytes(ir.box.nonceLength),d=ir.box(s,l,a,i.secretKey),v={version:"x25519-xsalsa20-poly1305",nonce:Fe.encodeBase64(l),ephemPublicKey:Fe.encodeBase64(i.publicKey),ciphertext:Fe.encodeBase64(d)};return v}default:throw new Error("Encryption type/version not supported")}}pe.encrypt=Xn;function ts(r,e,t){var i=Math.pow(2,11),a=16,s=e.data;if(!s)throw new Error("Cannot encrypt empty msg.data");if(typeof s=="object"&&"toJSON"in s)throw new Error("Cannot encrypt with toJSON property.  Please remove toJSON property");var l={data:s,padding:""},d=Buffer.byteLength(JSON.stringify(l),"utf-8"),v=d%i,x=0;v>0&&(x=i-v-a),l.padding="0".repeat(x);var y={data:JSON.stringify(l)};return Xn(r,y,t)}pe.encryptSafely=ts;function Qn(r,e){switch(r.version){case"x25519-xsalsa20-poly1305":{var t=oi(e),i=ir.box.keyPair.fromSecretKey(t).secretKey,a=Fe.decodeBase64(r.nonce),s=Fe.decodeBase64(r.ciphertext),l=Fe.decodeBase64(r.ephemPublicKey),d=ir.box.open(s,a,l,i),v=void 0;try{v=Fe.encodeUTF8(d)}catch{throw new Error("Decryption failed.")}if(v)return v;throw new Error("Decryption failed.")}default:throw new Error("Encryption type/version not supported.")}}pe.decrypt=Qn;function ns(r,e){var t=JSON.parse(Qn(r,e));return t.data}pe.decryptSafely=ns;function is(r){var e=oi(r),t=ir.box.keyPair.fromSecretKey(e).publicKey;return Fe.encodeBase64(t)}pe.getEncryptionPublicKey=is;function as(r,e,t){switch(t===void 0&&(t="V4"),t){case"V1":return Jn(r,e);case"V3":return ei(r,e);case"V4":default:return ri(r,e)}}pe.signTypedMessage=as;function os(r,e){switch(e===void 0&&(e="V4"),e){case"V1":return Zn(r);case"V3":return ti(r);case"V4":default:return ni(r)}}pe.recoverTypedMessage=os;function ei(r,e){var t=Br.sign(e.data,!1),i=K.ecsign(t,r);return K.bufferToHex(Ar(i.v,i.r,i.s))}pe.signTypedData=ei;function ri(r,e){var t=Br.sign(e.data),i=K.ecsign(t,r);return K.bufferToHex(Ar(i.v,i.r,i.s))}pe.signTypedData_v4=ri;function ti(r){var e=Br.sign(r.data,!1),t=qr(e,r.sig),i=K.publicToAddress(t);return K.bufferToHex(i)}pe.recoverTypedSignature=ti;function ni(r){var e=Br.sign(r.data),t=qr(e,r.sig),i=K.publicToAddress(t);return K.bufferToHex(i)}pe.recoverTypedSignature_v4=ni;function Ut(r){var e=new Error("Expect argument to be non-empty array");if(typeof r!="object"||!("length"in r)||!r.length)throw e;var t=r.map(function(s){return s.type==="bytes"?K.toBuffer(s.value):s.value}),i=r.map(function(s){return s.type}),a=r.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return Tr.soliditySHA3(["bytes32","bytes32"],[Tr.soliditySHA3(new Array(r.length).fill("string"),a),Tr.soliditySHA3(i,t)])}function qr(r,e){var t=K.toBuffer(e),i=K.fromRpcSig(t);return K.ecrecover(r,i.v,i.r,i.s)}function ii(r){var e=K.toBuffer(r.data),t=K.hashPersonalMessage(e);return qr(t,r.sig)}function ai(r,e){for(var t=""+r;t.length<e;)t="0"+t;return t}function oi(r){var e=Buffer.from(r,"hex").toString("base64");return Fe.decodeBase64(e)}var si={exports:{}};(function(r,e){(function(t){var i=function(s){setTimeout(s,0)};typeof process!="undefined"&&process&&typeof process.nextTick=="function"&&(i=process.nextTick);function a(s){var l={capacity:s||1,current:0,queue:[],firstHere:!1,take:function(){if(l.firstHere===!1){l.current++,l.firstHere=!0;var d=1}else var d=0;var v={n:1};typeof arguments[0]=="function"?v.task=arguments[0]:v.n=arguments[0],arguments.length>=2&&(typeof arguments[1]=="function"?v.task=arguments[1]:v.n=arguments[1]);var x=v.task;if(v.task=function(){x(l.leave)},l.current+v.n-d>l.capacity)return d===1&&(l.current--,l.firstHere=!1),l.queue.push(v);l.current+=v.n-d,v.task(l.leave),d===1&&(l.firstHere=!1)},leave:function(d){if(d=d||1,l.current-=d,!l.queue.length){if(l.current<0)throw new Error("leave called too many times.");return}var v=l.queue[0];v.n+l.current>l.capacity||(l.queue.shift(),l.current+=v.n,i(v.task))},available:function(d){return d=d||1,l.current+d<=l.capacity}};return l}r.exports=a})()})(si);const ss=wt;var fs=cs;function cs(r,e,t){r.sendAsync(ss({method:"eth_estimateGas",params:[e]}),function(i,a){if(i)return i.message==="no contract code at given address"?t(null,"0xcf08"):t(i);t(null,a.result)})}const Ce=Tt.exports,us=Bt.exports,ls=br.inherits,Wr=Dr,hs=pe,hr=bn,ds=si.exports,xs=Hr,ps=fs,vs=/^[0-9A-Fa-f]+$/g;var gs=xe;ls(xe,xs);function xe(r){const e=this;e.nonceLock=ds(1),r.getAccounts&&(e.getAccounts=r.getAccounts),r.processTransaction&&(e.processTransaction=r.processTransaction),r.processMessage&&(e.processMessage=r.processMessage),r.processPersonalMessage&&(e.processPersonalMessage=r.processPersonalMessage),r.processTypedMessage&&(e.processTypedMessage=r.processTypedMessage),r.processTypedMessageV3&&(e.processTypedMessageV3=r.processTypedMessageV3),e.approveTransaction=r.approveTransaction||e.autoApprove,e.approveMessage=r.approveMessage||e.autoApprove,e.approvePersonalMessage=r.approvePersonalMessage||e.autoApprove,e.approveTypedMessage=r.approveTypedMessage||e.autoApprove,e.approveTypedMessageV3=r.approveTypedMessageV3||e.autoApprove,r.signTransaction&&(e.signTransaction=r.signTransaction||Sr("signTransaction")),r.signMessage&&(e.signMessage=r.signMessage||Sr("signMessage")),r.signPersonalMessage&&(e.signPersonalMessage=r.signPersonalMessage||Sr("signPersonalMessage")),r.signTypedMessage&&(e.signTypedMessage=r.signTypedMessage||Sr("signTypedMessage")),r.signTypedMessageV3&&(e.signTypedMessageV3=r.signTypedMessageV3||Sr("signTypedMessageV3")),r.recoverPersonalSignature&&(e.recoverPersonalSignature=r.recoverPersonalSignature),r.publishTransaction&&(e.publishTransaction=r.publishTransaction),e.estimateGas=r.estimateGas||e.estimateGas,e.getGasPrice=r.getGasPrice||e.getGasPrice}xe.prototype.handleRequest=function(r,e,t){const i=this;i._parityRequests={},i._parityRequestCount=0;let a,s,l,d,v;switch(r.method){case"eth_coinbase":i.getAccounts(function(x,y){if(x)return t(x);let S=y[0]||null;t(null,S)});return;case"eth_accounts":i.getAccounts(function(x,y){if(x)return t(x);t(null,y)});return;case"eth_sendTransaction":a=r.params[0],Ce([x=>i.validateTransaction(a,x),x=>i.processTransaction(a,x)],t);return;case"eth_signTransaction":a=r.params[0],Ce([x=>i.validateTransaction(a,x),x=>i.processSignTransaction(a,x)],t);return;case"eth_sign":fi(r.params[1])&&dr(r.params[0])?(v=r.params[0],d=r.params[1]):(d=r.params[0],v=r.params[1]),l=r.params[2]||{},s=hr(l,{from:v,data:d}),Ce([x=>i.validateMessage(s,x),x=>i.processMessage(s,x)],t);return;case"personal_sign":return function(){const x=r.params[0],y=r.params[1];if(fi(y)&&dr(x)){let S="The eth_personalSign method requires params ordered ";S+="[message, address]. This was previously handled incorrectly, ",S+="and has been corrected automatically. ",S+="Please switch this param order for smooth behavior in the future.",console.warn(S),v=r.params[0],d=r.params[1]}else d=r.params[0],v=r.params[1];l=r.params[2]||{},s=hr(l,{from:v,data:d}),Ce([S=>i.validatePersonalMessage(s,S),S=>i.processPersonalMessage(s,S)],t)}();case"personal_ecRecover":return function(){d=r.params[0];let x=r.params[1];l=r.params[2]||{},s=hr(l,{sig:x,data:d}),i.recoverPersonalSignature(s,t)}();case"eth_signTypedData":!dr(r.params[1])&&dr(r.params[0])?(v=r.params[0],d=r.params[1]):(d=r.params[0],v=r.params[1]),l=r.params[2]||{},s=hr(l,{from:v,data:d}),Ce([x=>i.validateTypedMessage(s,x),x=>i.processTypedMessage(s,x)],t);return;case"eth_signTypedData_v3":!dr(r.params[1])&&dr(r.params[0])?(v=r.params[0],d=r.params[1]):(d=r.params[0],v=r.params[1]),l=r.params[2]||{},s=hr(l,{from:v,data:d}),Ce([x=>i.validateTypedMessageV3(s,x),x=>i.processTypedMessageV3(s,x)],t);return;case"parity_postTransaction":a=r.params[0],i.parityPostTransaction(a,t);return;case"parity_postSign":v=r.params[0],d=r.params[1],i.parityPostSign(v,d,t);return;case"parity_checkRequest":return function(){const x=r.params[0];i.parityCheckRequest(x,t)}();case"parity_defaultAccount":i.getAccounts(function(x,y){if(x)return t(x);const S=y[0]||null;t(null,S)});return;default:e();return}};xe.prototype.getAccounts=function(r){r(null,[])};xe.prototype.processTransaction=function(r,e){const t=this;Ce([i=>t.approveTransaction(r,i),(i,a)=>t.checkApproval("transaction",i,a),i=>t.finalizeAndSubmitTx(r,i)],e)};xe.prototype.processSignTransaction=function(r,e){const t=this;Ce([i=>t.approveTransaction(r,i),(i,a)=>t.checkApproval("transaction",i,a),i=>t.finalizeTx(r,i)],e)};xe.prototype.processMessage=function(r,e){const t=this;Ce([i=>t.approveMessage(r,i),(i,a)=>t.checkApproval("message",i,a),i=>t.signMessage(r,i)],e)};xe.prototype.processPersonalMessage=function(r,e){const t=this;Ce([i=>t.approvePersonalMessage(r,i),(i,a)=>t.checkApproval("message",i,a),i=>t.signPersonalMessage(r,i)],e)};xe.prototype.processTypedMessage=function(r,e){const t=this;Ce([i=>t.approveTypedMessage(r,i),(i,a)=>t.checkApproval("message",i,a),i=>t.signTypedMessage(r,i)],e)};xe.prototype.processTypedMessageV3=function(r,e){const t=this;Ce([i=>t.approveTypedMessageV3(r,i),(i,a)=>t.checkApproval("message",i,a),i=>t.signTypedMessageV3(r,i)],e)};xe.prototype.autoApprove=function(r,e){e(null,!0)};xe.prototype.checkApproval=function(r,e,t){t(e?null:new Error("User denied "+r+" signature."))};xe.prototype.parityPostTransaction=function(r,e){const t=this,a=`0x${t._parityRequestCount.toString(16)}`;t._parityRequestCount++,t.emitPayload({method:"eth_sendTransaction",params:[r]},function(s,l){if(s){t._parityRequests[a]={error:s};return}const d=l.result;t._parityRequests[a]=d}),e(null,a)};xe.prototype.parityPostSign=function(r,e,t){const i=this,s=`0x${i._parityRequestCount.toString(16)}`;i._parityRequestCount++,i.emitPayload({method:"eth_sign",params:[r,e]},function(l,d){if(l){i._parityRequests[s]={error:l};return}const v=d.result;i._parityRequests[s]=v}),t(null,s)};xe.prototype.parityCheckRequest=function(r,e){const i=this._parityRequests[r]||null;if(!i)return e(null,null);if(i.error)return e(i.error);e(null,i)};xe.prototype.recoverPersonalSignature=function(r,e){let t;try{t=hs.recoverPersonalSignature(r)}catch(i){return e(i)}e(null,t)};xe.prototype.validateTransaction=function(r,e){const t=this;if(r.from===void 0)return e(new Error("Undefined address - from address required to sign transaction."));t.validateSender(r.from,function(i,a){if(i)return e(i);if(!a)return e(new Error(`Unknown address - unable to sign transaction for this address: "${r.from}"`));e()})};xe.prototype.validateMessage=function(r,e){const t=this;if(r.from===void 0)return e(new Error("Undefined address - from address required to sign message."));t.validateSender(r.from,function(i,a){if(i)return e(i);if(!a)return e(new Error(`Unknown address - unable to sign message for this address: "${r.from}"`));e()})};xe.prototype.validatePersonalMessage=function(r,e){const t=this;if(r.from===void 0)return e(new Error("Undefined address - from address required to sign personal message."));if(r.data===void 0)return e(new Error("Undefined message - message required to sign personal message."));if(!ci(r.data))return e(new Error("HookedWalletSubprovider - validateMessage - message was not encoded as hex."));t.validateSender(r.from,function(i,a){if(i)return e(i);if(!a)return e(new Error(`Unknown address - unable to sign message for this address: "${r.from}"`));e()})};xe.prototype.validateTypedMessage=function(r,e){if(r.from===void 0)return e(new Error("Undefined address - from address required to sign typed data."));if(r.data===void 0)return e(new Error("Undefined data - message required to sign typed data."));this.validateSender(r.from,function(t,i){if(t)return e(t);if(!i)return e(new Error(`Unknown address - unable to sign message for this address: "${r.from}"`));e()})};xe.prototype.validateTypedMessageV3=function(r,e){if(r.from===void 0)return e(new Error("Undefined address - from address required to sign typed data."));if(r.data===void 0)return e(new Error("Undefined data - message required to sign typed data."));this.validateSender(r.from,function(t,i){if(t)return e(t);if(!i)return e(new Error(`Unknown address - unable to sign message for this address: "${r.from}"`));e()})};xe.prototype.validateSender=function(r,e){const t=this;if(!r)return e(null,!1);t.getAccounts(function(i,a){if(i)return e(i);const s=a.map(ys).indexOf(r.toLowerCase())!==-1;e(null,s)})};xe.prototype.finalizeAndSubmitTx=function(r,e){const t=this;t.nonceLock.take(function(){Ce([t.fillInTxExtras.bind(t,r),t.signTransaction.bind(t),t.publishTransaction.bind(t)],function(i,a){if(t.nonceLock.leave(),i)return e(i);e(null,a)})})};xe.prototype.finalizeTx=function(r,e){const t=this;t.nonceLock.take(function(){Ce([t.fillInTxExtras.bind(t,r),t.signTransaction.bind(t)],function(i,a){if(t.nonceLock.leave(),i)return e(i);e(null,{raw:a,tx:r})})})};xe.prototype.publishTransaction=function(r,e){this.emitPayload({method:"eth_sendRawTransaction",params:[r]},function(i,a){if(i)return e(i);e(null,a.result)})};xe.prototype.estimateGas=function(r,e){ps(this.engine,r,e)};xe.prototype.getGasPrice=function(r){this.emitPayload({method:"eth_gasPrice",params:[]},function(t,i){if(t)return r(t);r(null,i.result)})};xe.prototype.fillInTxExtras=function(r,e){const t=this,i=r.from,a={};r.gasPrice===void 0&&(a.gasPrice=t.getGasPrice.bind(t)),r.nonce===void 0&&(a.nonce=t.emitPayload.bind(t,{method:"eth_getTransactionCount",params:[i,"pending"]})),r.gas===void 0&&(a.gas=t.estimateGas.bind(t,ms(r))),us(a,function(s,l){if(s)return e(s);const d={};l.gasPrice&&(d.gasPrice=l.gasPrice),l.nonce&&(d.nonce=l.nonce.result),l.gas&&(d.gas=l.gas),e(null,hr(r,d))})};function ms(r){return{from:r.from,to:r.to,value:r.value,data:r.data,gas:r.gas,gasPrice:r.gasPrice,nonce:r.nonce}}function ys(r){return r.toLowerCase()}function dr(r){const e=Wr.addHexPrefix(r);return Wr.isValidAddress(e)}function fi(r){const e=Wr.addHexPrefix(r);return!Wr.isValidAddress(e)&&ci(r)}function ci(r){return!(typeof r=="string")||!(r.slice(0,2)==="0x")?!1:r.slice(2).match(vs)}function Sr(r){return function(e,t){t(new Error('ProviderEngine - HookedWalletSubprovider - Must provide "'+r+'" fn in constructor options'))}}const ws=br.inherits,bs=la,jr=Dr,_s=Hr,Es=Na.blockTagForPayload;var ui=It;ws(It,_s);function It(r){const e=this;e.nonceCache={}}It.prototype.handleRequest=function(r,e,t){const i=this;switch(r.method){case"eth_getTransactionCount":var a=Es(r),s=r.params[0].toLowerCase(),l=i.nonceCache[s];a==="pending"?l?t(null,l):e(function(d,v,x){if(d)return x();i.nonceCache[s]===void 0&&(i.nonceCache[s]=v),x()}):e();return;case"eth_sendRawTransaction":e(function(d,v,x){if(d)return x();var y=r.params[0];jr.stripHexPrefix(y),Buffer.from(jr.stripHexPrefix(y),"hex");var S=new bs(Buffer.from(jr.stripHexPrefix(y),"hex")),P="0x"+S.getSenderAddress().toString("hex").toLowerCase(),h=jr.bufferToInt(S.nonce);h++;var B=h.toString(16);B.length%2&&(B="0"+B),B="0x"+B,i.nonceCache[P]=B,x()});return;case"evm_revert":i.nonceCache={},e();return;default:e();return}};const Ts=bt,Bs=xa;class As extends Ts{constructor(){super(({blockTracker:e,provider:t,engine:i})=>{const{events:a,middleware:s}=Bs({blockTracker:e,provider:t});return a.on("notification",l=>i.emit("data",null,l)),s})}}var Ss=As,Ge={};Object.defineProperty(Ge,"__esModule",{value:!0});var li=Ge.default=Ge.ERR_NOT_IN_IFRAME=Ge.ERR_CONNECTION_TIMEOUT=Ge.ERR_CONNECTION_DESTROYED=void 0,hi="handshake",di="handshake-reply",xi="call",Nt="reply",pi="fulfilled",Mt="rejected",Ke="message",ks="DataCloneError",kr="ConnectionDestroyed";Ge.ERR_CONNECTION_DESTROYED=kr;var Vr="ConnectionTimeout";Ge.ERR_CONNECTION_TIMEOUT=Vr;var Ot="NotInIframe";Ge.ERR_NOT_IN_IFRAME=Ot;var Rs={"http:":"80","https:":"443"},Ps=/^(https?:)?\/\/([^/:]+)(:(\d+))?/,Xe={ERR_CONNECTION_DESTROYED:kr,ERR_CONNECTION_TIMEOUT:Vr,ERR_NOT_IN_IFRAME:Ot,Promise:function(){try{return window?window.Promise:null}catch{return null}}(),debug:!1},Cs=function(){var r=0;return function(){return++r}}(),$e=function(){if(Xe.debug){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];(e=console).log.apply(e,["[Penpal]"].concat(i))}},Ls=function(e){var t=document.location,i=Ps.exec(e),a,s,l;i?(a=i[1]?i[1]:t.protocol,s=i[2],l=i[4]):(a=t.protocol,s=t.hostname,l=t.port);var d=l&&l!==Rs[a]?":".concat(l):"";return"".concat(a,"//").concat(s).concat(d)},Dt=function(e){var t=[];return e(function(){t.forEach(function(i){i()})}),{then:function(a){t.push(a)}}},vi=function(e){var t=e.name,i=e.message,a=e.stack;return{name:t,message:i,stack:a}},Us=function(e){var t=new Error;return Object.keys(e).forEach(function(i){return t[i]=e[i]}),t},gi=function(e,t,i,a){var s=t.localName,l=t.local,d=t.remote,v=t.remoteOrigin,x=!1;$e("".concat(s,": Connecting call sender"));var y=function(P){return function(){for(var h=arguments.length,B=new Array(h),U=0;U<h;U++)B[U]=arguments[U];if($e("".concat(s,": Sending ").concat(P,"() call")),x){var z=new Error("Unable to send ".concat(P,"() call due ")+"to destroyed connection");throw z.code=kr,z}return new Xe.Promise(function(H,ee){var de=Cs(),le=function ie(ve){if(ve.source===d&&ve.origin===v&&ve.data.penpal===Nt&&ve.data.id===de){$e("".concat(s,": Received ").concat(P,"() reply")),l.removeEventListener(Ke,ie);var Je=ve.data.returnValue;ve.data.returnValueIsError&&(Je=Us(Je)),(ve.data.resolution===pi?H:ee)(Je)}};l.addEventListener(Ke,le),d.postMessage({penpal:xi,id:de,methodName:P,args:B},v)})}};a.then(function(){x=!0}),i.reduce(function(S,P){return S[P]=y(P),S},e)},mi=function(e,t,i){var a=e.localName,s=e.local,l=e.remote,d=e.remoteOrigin,v=!1;$e("".concat(a,": Connecting call receiver"));var x=function(S){if(S.source===l&&S.origin===d&&S.data.penpal===xi){var P=S.data,h=P.methodName,B=P.args,U=P.id;if($e("".concat(a,": Received ").concat(h,"() call")),h in t){var z=function(ee){return function(de){if($e("".concat(a,": Sending ").concat(h,"() reply")),v){$e("".concat(a,": Unable to send ").concat(h,"() reply due to destroyed connection"));return}var le={penpal:Nt,id:U,resolution:ee,returnValue:de};ee===Mt&&de instanceof Error&&(le.returnValue=vi(de),le.returnValueIsError=!0);try{l.postMessage(le,d)}catch(ie){throw ie.name===ks&&l.postMessage({penpal:Nt,id:U,resolution:Mt,returnValue:vi(ie),returnValueIsError:!0},d),ie}}};new Xe.Promise(function(H){return H(t[h].apply(t,B))}).then(z(pi),z(Mt))}}};s.addEventListener(Ke,x),i.then(function(){v=!0,s.removeEventListener(Ke,x)})};Xe.connectToChild=function(r){var e=r.url,t=r.appendTo,i=r.methods,a=i===void 0?{}:i,s=r.timeout,l,d=new Dt(function(h){l=h}),v=window,x=document.createElement("iframe");(t||document.body).appendChild(x),d.then(function(){x.parentNode&&x.parentNode.removeChild(x)});var y=x.contentWindow||x.contentDocument.parentWindow,S=Ls(e),P=new Xe.Promise(function(h,B){var U;s!==void 0&&(U=setTimeout(function(){var le=new Error("Connection to child timed out after ".concat(s,"ms"));le.code=Vr,B(le),l()},s));var z={},H,ee,de=function(ie){if(ie.source===y&&ie.origin===S&&ie.data.penpal===hi){$e("Parent: Received handshake, sending reply"),ie.source.postMessage({penpal:di,methodNames:Object.keys(a)},ie.origin);var ve={localName:"Parent",local:v,remote:y,remoteOrigin:ie.origin};ee&&ee();var Je=new Dt(function(Qe){d.then(Qe),ee=Qe});mi(ve,a,Je),H&&H.forEach(function(Qe){delete z[Qe]}),H=ie.data.methodNames,gi(z,ve,H,d),clearTimeout(U),h(z)}};v.addEventListener(Ke,de),d.then(function(){v.removeEventListener(Ke,de);var le=new Error("Connection destroyed");le.code=kr,B(le)}),$e("Parent: Loading iframe"),x.src=e});return{promise:P,iframe:x,destroy:l}};Xe.connectToParent=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=r.parentOrigin,t=e===void 0?"*":e,i=r.methods,a=i===void 0?{}:i,s=r.timeout;if(window===window.top){var l=new Error("connectToParent() must be called within an iframe");throw l.code=Ot,l}var d,v=new Dt(function(P){d=P}),x=window,y=x.parent,S=new Xe.Promise(function(P,h){var B;s!==void 0&&(B=setTimeout(function(){var z=new Error("Connection to parent timed out after ".concat(s,"ms"));z.code=Vr,h(z),d()},s));var U=function z(H){if((t==="*"||t===H.origin)&&H.source===y&&H.data.penpal===di){$e("Child: Received handshake reply"),x.removeEventListener(Ke,z);var ee={localName:"Child",local:x,remote:y,remoteOrigin:H.origin},de={};mi(ee,a,v),gi(de,ee,H.data.methodNames,v),clearTimeout(B),P(de)}};x.addEventListener(Ke,U),v.then(function(){x.removeEventListener(Ke,U);var z=new Error("Connection destroyed");z.code=kr,h(z)}),$e("Child: Sending handshake"),y.postMessage({penpal:hi,methodNames:Object.keys(a)},t)});return{promise:S,destroy:d}};var Is=Xe;li=Ge.default=Is;function yi(r,e){var t=typeof r=="string"?Object.assign({},Ns[r]):r;if(typeof t!="object")throw new Error("[Portis] illegal 'network' parameter. Read more about it here: https://docs.portis.io/#/configuration?id=network");if(!t.nodeUrl)throw new Error("[Portis] 'nodeUrl' is required. Read more about it here: https://docs.portis.io/#/configuration?id=network");if(e&&!t.gasRelayHubAddress)throw new Error("[Portis] can't find default gas relay hub for "+r);return typeof r=="string"&&!e&&delete t.gasRelayHubAddress,t}var Ns={mainnet:{nodeUrl:"https://mainnet.infura.io/v3/faa4639b090f46499f29d894da0551a0",chainId:"1",gasRelayHubAddress:"0xD216153c06E857cD7f72665E0aF1d7D82172F494"},ropsten:{nodeUrl:"https://ropsten.infura.io/v3/faa4639b090f46499f29d894da0551a0",chainId:"3",gasRelayHubAddress:"0xD216153c06E857cD7f72665E0aF1d7D82172F494"},rinkeby:{nodeUrl:"https://rinkeby.infura.io/v3/faa4639b090f46499f29d894da0551a0",chainId:"4",gasRelayHubAddress:"0xD216153c06E857cD7f72665E0aF1d7D82172F494"},goerli:{nodeUrl:"https://goerli.prylabs.net",chainId:"5"},ubiq:{nodeUrl:"https://rpc1.ubiqscan.io",chainId:"8"},thundercoreTestnet:{nodeUrl:"https://testnet-rpc.thundercore.com:8544",chainId:"18"},orchid:{nodeUrl:"https://public-node.rsk.co",chainId:"30"},orchidTestnet:{nodeUrl:"https://public-node.testnet.rsk.co",chainId:"31"},kovan:{nodeUrl:"https://kovan.infura.io/v3/faa4639b090f46499f29d894da0551a0",chainId:"42",gasRelayHubAddress:"0xD216153c06E857cD7f72665E0aF1d7D82172F494"},classic:{nodeUrl:"https://ethereumclassic.network",chainId:"61"},sokol:{nodeUrl:"https://sokol.poa.network",chainId:"77"},core:{nodeUrl:"https://core.poa.network",chainId:"99"},xdai:{nodeUrl:"https://dai.poa.network",chainId:"100",gasRelayHubAddress:"0xD216153c06E857cD7f72665E0aF1d7D82172F494"},thundercore:{nodeUrl:"https://mainnet-rpc.thundercore.com",chainId:"108"},fuse:{nodeUrl:"https://rpc.fusenet.io",chainId:"122"},lightstreams:{nodeUrl:"https://node.mainnet.lightstreams.io",chainId:"163"},matic:{nodeUrl:"https://rpc-mainnet.matic.network",chainId:"137"},maticMumbai:{nodeUrl:"https://rpc-mumbai.matic.today",chainId:"80001"},maticAlpha:{nodeUrl:"https://alpha.ethereum.matic.network",chainId:"4626"},maticTestnet:{nodeUrl:"https://testnet2.matic.network",chainId:"8995"}},Ht=globalThis&&globalThis.__awaiter||function(r,e,t,i){return new(t||(t=Promise))(function(a,s){function l(x){try{v(i.next(x))}catch(y){s(y)}}function d(x){try{v(i.throw(x))}catch(y){s(y)}}function v(x){x.done?a(x.value):new t(function(y){y(x.value)}).then(l,d)}v((i=i.apply(r,e||[])).next())})},Ft=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(x){return function(y){return v([x,y])}}function v(x){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(s=x[0]&2?a.return:x[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,x[1])).done)return s;switch(a=0,s&&(x=[x[0]&2,s.value]),x[0]){case 0:case 1:s=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,a=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!s||x[1]>s[0]&&x[1]<s[3])){t.label=x[1];break}if(x[0]===6&&t.label<s[1]){t.label=s[1],s=x;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(x);break}s[2]&&t.ops.pop(),t.trys.pop();continue}x=e.call(r,t)}catch(y){x=[6,y],a=0}finally{i=s=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},$t=require("ethereumjs-util"),wi=$t.addHexPrefix,Ms=$t.stripHexPrefix,zt=$t.BN,Os="0x5208";function Ds(r,e){return Ht(this,void 0,void 0,function(){var t,i,a,s,l,d;return Ft(this,function(v){switch(v.label){case 0:return[4,r.getBlockByNumber("latest",!1)];case 1:return t=v.sent(),[4,Hs(r,e,t.gasLimit)];case 2:if(i=v.sent(),a=i.safeGas,s=i.simpleSend,l=i.gasLimitSpecified,s||l)return[2,a];v.label=3;case 3:return v.trys.push([3,5,,6]),[4,Fs(r,e,t.gasLimit,a)];case 4:return d=v.sent(),[2,d];case 5:return v.sent(),[2,a];case 6:return[2]}})})}function Hs(r,e,t){return Ht(this,void 0,void 0,function(){var i,a,s,l,d,v,x,y;return Ft(this,function(S){switch(S.label){case 0:return i=Boolean(e.gas),i?[2,{safeGas:e.gas,simpleSend:!1,gasLimitSpecified:!0}]:(a=e.to,s=Boolean(a),s?[4,r.getCode(a)]:[3,2]);case 1:if(l=S.sent(),d=!l||l==="0x"||l==="0x0",d){if(e.data)throw v=new Error("Trying to call a function on a non-contract address"),v;return[2,{safeGas:Os,simpleSend:!0,gasLimitSpecified:!1}]}S.label=2;case 2:return x=qt(t),y=zs(x,19,20),[2,{safeGas:Gr(y),simpleSend:!1,gasLimitSpecified:!1}]}})})}function Fs(r,e,t,i){return Ht(this,void 0,void 0,function(){var a,s;return Ft(this,function(l){switch(l.label){case 0:return e.gas=i,s=wi,[4,r.estimateGas(e)];case 1:return a=s.apply(void 0,[l.sent()]),[2,$s(a,t)]}})})}function $s(r,e){var t=qt(r),i=qt(e),a=i.muln(.9),s=t.muln(1.5);return t.gt(a)?Gr(t):s.lt(a)?Gr(s):Gr(a)}function qt(r){return new zt(Ms(r),16)}function Gr(r){return wi(r.toString(16))}function zs(r,e,t){var i=new zt(e),a=new zt(t);return r.mul(i).div(a)}var qs=function(){function r(e){this.provider=e}return r.prototype.getBlockByNumber=function(e,t){return this.sendAsync("eth_getBlockByNumber",e,t)},r.prototype.getCode=function(e,t){return t===void 0&&(t="latest"),this.sendAsync("eth_getCode",e,t)},r.prototype.estimateGas=function(e){return this.sendAsync("eth_estimateGas",e)},r.prototype.sendAsync=function(e){for(var t=this,i=[],a=1;a<arguments.length;a++)i[a-1]=arguments[a];return new Promise(function(s,l){t.provider.sendAsync({id:42,jsonrpc:"2.0",method:e,params:i},function(d,v){d?l(d):s(v.result)})})},r}(),Wt=!1;function bi(){return new Promise(function(r){Wt?r():["loaded","interactive","complete"].indexOf(document.readyState)>-1?(Wt=!0,r()):window.addEventListener("load",function(){Wt=!0,r()},!1)})}var Ws=`
.por_portis-container {
  position: fixed;
  width: 0px;
  height: 0px;
  top: 0px;
  right: 0px;
  z-index: 2147483647;
}

@media (max-width: 576px) {
  .por_portis-container {
    bottom: 0;
    top: auto;
  }
}

.por_portis-widget-frame {
  position: fixed;
  width: 375px;
  height: 0;
  top: 20px;
  right: 20px;
  box-shadow: 0 5px 40px rgba(0,0,0,.16);
  border-radius: 8px;
  overflow: hidden;
  z-index: 2147483000;
}

@media (max-width: 576px) {
  .por_portis-widget-frame {
    bottom: 0;
    top: auto;
    width: 100%;
    right: 0;
    left: 0;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
  }
}
`;function js(){var r=location.hostname==="localhost"||location.hostname==="127.0.0.1",e=location.protocol==="https:",t=r||e;if(!t)throw`[Portis] Access to the WebCrypto API is restricted to secure origins.
If this is a development environment please use http://localhost:`+location.port+` instead.
Otherwise, please use an SSL certificate.`}var jt={exports:{}};class Vs{constructor(e,t){this.name=e,this.netID=t}toJSON(){return JSON.parse('{ "name":"'+this.name+'", "netID":"'+this.netID+'"}')}}var Gs={Blockchain:Vs},Vt={exports:{}},_i=function(e,t){return function(){for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];return e.apply(t,a)}};/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Ks=function(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)},Ys=_i,Js=Ks,xr=Object.prototype.toString;function Ei(r){return xr.call(r)==="[object Array]"}function Zs(r){return xr.call(r)==="[object ArrayBuffer]"}function Xs(r){return typeof FormData!="undefined"&&r instanceof FormData}function Qs(r){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&r.buffer instanceof ArrayBuffer,e}function ef(r){return typeof r=="string"}function rf(r){return typeof r=="number"}function tf(r){return typeof r=="undefined"}function Ti(r){return r!==null&&typeof r=="object"}function nf(r){return xr.call(r)==="[object Date]"}function af(r){return xr.call(r)==="[object File]"}function of(r){return xr.call(r)==="[object Blob]"}function Bi(r){return xr.call(r)==="[object Function]"}function sf(r){return Ti(r)&&Bi(r.pipe)}function ff(r){return typeof URLSearchParams!="undefined"&&r instanceof URLSearchParams}function cf(r){return r.replace(/^\s*/,"").replace(/\s*$/,"")}function uf(){return typeof navigator!="undefined"&&navigator.product==="ReactNative"?!1:typeof window!="undefined"&&typeof document!="undefined"}function Gt(r,e){if(!(r===null||typeof r=="undefined"))if(typeof r!="object"&&(r=[r]),Ei(r))for(var t=0,i=r.length;t<i;t++)e.call(null,r[t],t,r);else for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.call(null,r[a],a,r)}function Ai(){var r={};function e(a,s){typeof r[s]=="object"&&typeof a=="object"?r[s]=Ai(r[s],a):r[s]=a}for(var t=0,i=arguments.length;t<i;t++)Gt(arguments[t],e);return r}function lf(r,e,t){return Gt(e,function(a,s){t&&typeof a=="function"?r[s]=Ys(a,t):r[s]=a}),r}var Me={isArray:Ei,isArrayBuffer:Zs,isBuffer:Js,isFormData:Xs,isArrayBufferView:Qs,isString:ef,isNumber:rf,isObject:Ti,isUndefined:tf,isDate:nf,isFile:af,isBlob:of,isFunction:Bi,isStream:sf,isURLSearchParams:ff,isStandardBrowserEnv:uf,forEach:Gt,merge:Ai,extend:lf,trim:cf},hf=Me,df=function(e,t){hf.forEach(e,function(a,s){s!==t&&s.toUpperCase()===t.toUpperCase()&&(e[t]=a,delete e[s])})},xf=function(e,t,i,a,s){return e.config=t,i&&(e.code=i),e.request=a,e.response=s,e},pf=xf,Si=function(e,t,i,a,s){var l=new Error(e);return pf(l,t,i,a,s)},vf=Si,gf=function(e,t,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?e(i):t(vf("Request failed with status code "+i.status,i.config,null,i.request,i))},pr=Me;function ki(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mf=function(e,t,i){if(!t)return e;var a;if(i)a=i(t);else if(pr.isURLSearchParams(t))a=t.toString();else{var s=[];pr.forEach(t,function(d,v){d===null||typeof d=="undefined"||(pr.isArray(d)?v=v+"[]":d=[d],pr.forEach(d,function(y){pr.isDate(y)?y=y.toISOString():pr.isObject(y)&&(y=JSON.stringify(y)),s.push(ki(v)+"="+ki(y))}))}),a=s.join("&")}return a&&(e+=(e.indexOf("?")===-1?"?":"&")+a),e},Kt=Me,yf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],wf=function(e){var t={},i,a,s;return e&&Kt.forEach(e.split(`
`),function(d){if(s=d.indexOf(":"),i=Kt.trim(d.substr(0,s)).toLowerCase(),a=Kt.trim(d.substr(s+1)),i){if(t[i]&&yf.indexOf(i)>=0)return;i==="set-cookie"?t[i]=(t[i]?t[i]:[]).concat([a]):t[i]=t[i]?t[i]+", "+a:a}}),t},Ri=Me,bf=Ri.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a"),i;function a(s){var l=s;return e&&(t.setAttribute("href",l),l=t.href),t.setAttribute("href",l),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return i=a(window.location.href),function(l){var d=Ri.isString(l)?a(l):l;return d.protocol===i.protocol&&d.host===i.host}}():function(){return function(){return!0}}(),Kr=Me,_f=Kr.isStandardBrowserEnv()?function(){return{write:function(t,i,a,s,l,d){var v=[];v.push(t+"="+encodeURIComponent(i)),Kr.isNumber(a)&&v.push("expires="+new Date(a).toGMTString()),Kr.isString(s)&&v.push("path="+s),Kr.isString(l)&&v.push("domain="+l),d===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(t){var i=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Yt=Me,Ef=gf,Tf=mf,Bf=wf,Af=bf,Pi=Si,Ci=function(e){return new Promise(function(i,a){var s=e.data,l=e.headers;Yt.isFormData(s)&&delete l["Content-Type"];var d=new XMLHttpRequest;if(e.auth){var v=e.auth.username||"",x=e.auth.password||"";l.Authorization="Basic "+btoa(v+":"+x)}if(d.open(e.method.toUpperCase(),Tf(e.url,e.params,e.paramsSerializer),!0),d.timeout=e.timeout,d.onreadystatechange=function(){if(!(!d||d.readyState!==4)&&!(d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0))){var h="getAllResponseHeaders"in d?Bf(d.getAllResponseHeaders()):null,B=!e.responseType||e.responseType==="text"?d.responseText:d.response,U={data:B,status:d.status,statusText:d.statusText,headers:h,config:e,request:d};Ef(i,a,U),d=null}},d.onerror=function(){a(Pi("Network Error",e,null,d)),d=null},d.ontimeout=function(){a(Pi("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",d)),d=null},Yt.isStandardBrowserEnv()){var y=_f,S=(e.withCredentials||Af(e.url))&&e.xsrfCookieName?y.read(e.xsrfCookieName):void 0;S&&(l[e.xsrfHeaderName]=S)}if("setRequestHeader"in d&&Yt.forEach(l,function(h,B){typeof s=="undefined"&&B.toLowerCase()==="content-type"?delete l[B]:d.setRequestHeader(B,h)}),e.withCredentials&&(d.withCredentials=!0),e.responseType)try{d.responseType=e.responseType}catch(P){if(e.responseType!=="json")throw P}typeof e.onDownloadProgress=="function"&&d.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(h){!d||(d.abort(),a(h),d=null)}),s===void 0&&(s=null),d.send(s)})},Le=Me,Sf=df,kf={"Content-Type":"application/x-www-form-urlencoded"};function Li(r,e){!Le.isUndefined(r)&&Le.isUndefined(r["Content-Type"])&&(r["Content-Type"]=e)}function Rf(){var r;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined")&&(r=Ci),r}var Yr={adapter:Rf(),transformRequest:[function(e,t){return Sf(t,"Content-Type"),Le.isFormData(e)||Le.isArrayBuffer(e)||Le.isBuffer(e)||Le.isStream(e)||Le.isFile(e)||Le.isBlob(e)?e:Le.isArrayBufferView(e)?e.buffer:Le.isURLSearchParams(e)?(Li(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Le.isObject(e)?(Li(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if(typeof e=="string")try{e=JSON.parse(e)}catch{}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};Yr.headers={common:{Accept:"application/json, text/plain, */*"}};Le.forEach(["delete","get","head"],function(e){Yr.headers[e]={}});Le.forEach(["post","put","patch"],function(e){Yr.headers[e]=Le.merge(kf)});var Jt=Yr,Pf=Me;function Jr(){this.handlers=[]}Jr.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1};Jr.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};Jr.prototype.forEach=function(e){Pf.forEach(this.handlers,function(i){i!==null&&e(i)})};var Cf=Jr,Lf=Me,Uf=function(e,t,i){return Lf.forEach(i,function(s){e=s(e,t)}),e},Ui=function(e){return!!(e&&e.__CANCEL__)},If=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)},Nf=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e},Ii=Me,Zt=Uf,Mf=Ui,Of=Jt,Df=If,Hf=Nf;function Xt(r){r.cancelToken&&r.cancelToken.throwIfRequested()}var Ff=function(e){Xt(e),e.baseURL&&!Df(e.url)&&(e.url=Hf(e.baseURL,e.url)),e.headers=e.headers||{},e.data=Zt(e.data,e.headers,e.transformRequest),e.headers=Ii.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),Ii.forEach(["delete","get","head","post","put","patch","common"],function(a){delete e.headers[a]});var t=e.adapter||Of.adapter;return t(e).then(function(a){return Xt(e),a.data=Zt(a.data,a.headers,e.transformResponse),a},function(a){return Mf(a)||(Xt(e),a&&a.response&&(a.response.data=Zt(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)})},$f=Jt,vr=Me,Ni=Cf,zf=Ff;function Zr(r){this.defaults=r,this.interceptors={request:new Ni,response:new Ni}}Zr.prototype.request=function(e){typeof e=="string"&&(e=vr.merge({url:arguments[0]},arguments[1])),e=vr.merge($f,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[zf,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach(function(s){t.unshift(s.fulfilled,s.rejected)}),this.interceptors.response.forEach(function(s){t.push(s.fulfilled,s.rejected)});t.length;)i=i.then(t.shift(),t.shift());return i};vr.forEach(["delete","get","head","options"],function(e){Zr.prototype[e]=function(t,i){return this.request(vr.merge(i||{},{method:e,url:t}))}});vr.forEach(["post","put","patch"],function(e){Zr.prototype[e]=function(t,i,a){return this.request(vr.merge(a||{},{method:e,url:t,data:i}))}});var qf=Zr;function Qt(r){this.message=r}Qt.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Qt.prototype.__CANCEL__=!0;var Mi=Qt,Wf=Mi;function Xr(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(a){e=a});var t=this;r(function(a){t.reason||(t.reason=new Wf(a),e(t.reason))})}Xr.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Xr.source=function(){var e,t=new Xr(function(a){e=a});return{token:t,cancel:e}};var jf=Xr,Vf=function(e){return function(i){return e.apply(null,i)}},en=Me,Gf=_i,Qr=qf,Oi=Jt;function Di(r){var e=new Qr(r),t=Gf(Qr.prototype.request,e);return en.extend(t,Qr.prototype,e),en.extend(t,e),t}var Ye=Di(Oi);Ye.Axios=Qr;Ye.create=function(e){return Di(en.merge(Oi,e))};Ye.Cancel=Mi;Ye.CancelToken=jf;Ye.isCancel=Ui;Ye.all=function(e){return Promise.all(e)};Ye.spread=Vf;Vt.exports=Ye;Vt.exports.default=Ye;var rn=Vt.exports;const Kf="https://dispatch.pokt.network",Yf="/v1/dispatch",Jf="/v1/report",Zf="/v1/relay/";var tn={dispatchNodeURL:Kf,dispatchPath:Yf,reportPath:Jf,relayPath:Zf};const Xf=rn,Qf=tn,Hi="https://",Fi="http://";class ec{constructor(e,t,i){this.network=e,this.netID=t;var a=i.split(":");this.ip=a[0],this.port=a[1],i.includes(Hi)||i.includes(Fi)?this.ipPort=i:this.port==="443"||this.port===443?this.ipPort=Hi+i:this.ipPort=Fi+i}isValid(){for(var e in this)if(!this.hasOwnProperty(e)||this[e]=="")return!1;return!0}isEqual(e,t){return this.netID==e.toString()&&this.network==t.toString()}async sendRelay(e,t){try{var i=await Xf.create({baseURL:this.ipPort,timeout:e.configuration.requestTimeOut,headers:{"Content-Type":"application/json"}}).post(Qf.relayPath,e.toJSON());if(i.status==200&&i.data!=null){var a=i.data;if(t){t(a,null);return}else return a}else if(t){t(null,new Error("Failed to send relay with error: "+i.data));return}else return new Error("Failed to send relay with error: "+i.data)}catch(s){if(t){t(null,new Error("Failed to send relay with error: "+s));return}else return new Error("Failed to send relay with error: "+s)}}}var $i={Node:ec};const rc=rn,zi=$i.Node,nn=tn;class tc{constructor(e){this.configuration=e,this.axiosInstance=rc.create({baseURL:nn.dispatchNodeURL,path:nn.dispatchPath,timeout:this.configuration.requestTimeOut,headers:{"Content-Type":"application/json"}})}blockchainsJSON(){var e=[];return this.configuration.blockchains.forEach(t=>{e.push(t)}),e}async retrieveServiceNodes(e){try{var t=this,i=null;if(i=await this.axiosInstance.post(nn.dispatchPath,{DevID:t.configuration.devID,Blockchains:t.blockchainsJSON()}),i!=null&&i.status==200&&i.data!=null){var a=this.parseDispatchResponse(i.data);if(e){e(a,null);return}else return a}else if(e){e(null,new Error("Failed to retrieve service nodes with error: "+i.data));return}else return new Error("Failed to retrieve service nodes with error: "+i.data)}catch(s){if(e){e(null,new Error("Failed to retrieve service nodes with error: "+s));return}else return new Error("Failed to retrieve service nodes with error: "+s)}}parseDispatchResponse(e){try{var t=[];if(Array.isArray(e))e.forEach(s=>{var l=s.name,d=s.netid;s.ips&&s.ips.forEach(v=>{var x=new zi(l,d,v);t.push(x)})});else{var i=e.name,a=e.netid;e.ips&&e.ips.forEach(s=>{var l=new zi(i,a,s);t.push(l)})}return t}catch(s){return new Error("Failed to parsed service nodes with error: "+s)}}}var nc={Dispatch:tc};class ic{constructor(e,t,i,a){this.blockchain=e,this.netID=t,this.data=i,this.configuration=a}toJSON(){return{Blockchain:this.blockchain,NetID:this.netID,Data:this.data,DevID:this.configuration.devID}}isValid(){for(var e in this)if(!this.hasOwnProperty(e)||this[e]=="")return!1;return!0}}var ac={Relay:ic};const oc=rn,qi=tn;class sc{constructor(e,t,i){this.ip=e,this.message=t,this.configuration=i}toJSON(){return{IP:this.ip,Message:this.message}}isValid(){for(var e in this)if(!this.hasOwnProperty(e)||this[e]=="")return!1;return!0}async send(e){var i=await oc.create({baseURL:qi.dispatchNodeURL,timeout:this.configuration.requestTimeOut,headers:{"Content-Type":"application/json"}}).post(qi.reportPath,this.toJSON());if(i.status==200&&i.data!=null){if(e){e(null,i.data);return}return i.data}else{if(e){e(new Error("Failed to send report with error: "+i.data));return}return new Error("Failed to send report with error: "+i.data)}}}var fc={Report:sc};class cc{constructor(e,t,i,a,s){this.address=e,this.privateKey=t,this.network=i,this.networkID=a,this.data=s}}var uc={Wallet:cc};(function(r){r.exports=Object.assign(r.exports,Gs,nc,$i,ac,fc,uc)})(jt);const et=jt.exports,Wi=et.Blockchain,lc=et.Dispatch,ji=et.Relay,hc=et.Report;class dc{constructor(e,t,i,a){this.devID=e,this.blockchains=t,this.maxNodes=i||5,this.nodes=[],this.requestTimeOut=a||1e4,this.dispatch=null}nodesIsEmpty(){return this.nodes==null||this.nodes.length==0}}class xc{constructor(e){var t=[];if(e.devID==null||e.networkName==null||e.netIDs==null)return new Error("Invalid number of arguments");if(Array.isArray(e.netIDs))e.netIDs.forEach(a=>{var s=new Wi(e.networkName,a);t.push(s.toJSON())});else{var i=new Wi(e.networkName,e.netIDs);t.push(i.toJSON())}this.configuration=new dc(e.devID,t,e.maxNodes||5,e.requestTimeOut||1e4)}createRelay(e,t,i){return typeof i=="string"?new ji(e,t,i,this.configuration):new ji(e,t,JSON.stringify(i),this.configuration)}createReport(e,t){return new hc(e,t,this.configuration)}getDispatch(){return this.dispatch==null&&(this.dispatch=new lc(this.configuration)),this.dispatch}async getNode(e,t){try{var i=[];if(this.configuration.nodesIsEmpty()){var a=await this.retrieveNodes();if(a instanceof Error)throw a;this.configuration.nodes=a}return this.configuration.nodes.forEach(s=>{s.isEqual(e,t)&&i.push(s)}),i.length<=0?null:i[Math.floor(Math.random()*i.length)]}catch{return null}}async sendReport(e,t){try{if(e==null)throw new Error("Report is null");if(!e.isValid())throw new Error("One or more Report properties are empty.");var i=await e.send();if(i instanceof Error)if(t){t(i);return}else return i;else if(t){t(null,i);return}else return i}catch(a){if(t){t(a);return}else return a}}async sendRelay(e,t){try{if(e==null||e.data==null)if(t){t(new Error("Relay is null or data field is missing"));return}else return new Error("Relay is null or data field is missing");if(!e.isValid())if(t){t(new Error("Relay is missing a property, please verify all properties."));return}else return new Error("Relay is missing a property, please verify all properties.");var i=await this.getNode(e.netID,e.blockchain);if(i==null)if(t){t(new Error("Node is empty."));return}else return new Error("Node is empty.");var a=await i.sendRelay(e);if(a instanceof Error)if(t){t(a);return}else return a;else if(t){t(null,a);return}else return a}catch(s){if(t){t(new Error("Failed to send relay with error: "+s));return}else return new Error("Failed to send relay with error: "+s)}}async retrieveNodes(e){try{var t=this.getDispatch(),i=await t.retrieveServiceNodes();if(!(i instanceof Error)&&i.length!=0)if(this.configuration.nodes=i,e){e(null,i);return}else return i;else if(e){e(new Error("Failed to retrieve a list of nodes."),null);return}else return new Error("Failed to retrieve a list of nodes.")}catch(a){if(e){e(new Error("Failed to retrieve a list of nodes with error: "+a),null);return}else return new Error("Failed to retrieve a list of nodes with error: "+a)}}}var pc=xc;const Vi=jt.exports,vc=Vi.Wallet,gc=Vi.Relay,mc=pc;var Gi={Pocket:mc,Wallet:vc,Relay:gc},_e=globalThis&&globalThis.__awaiter||function(r,e,t,i){return new(t||(t=Promise))(function(a,s){function l(x){try{v(i.next(x))}catch(y){s(y)}}function d(x){try{v(i.throw(x))}catch(y){s(y)}}function v(x){x.done?a(x.value):new t(function(y){y(x.value)}).then(l,d)}v((i=i.apply(r,e||[])).next())})},Ee=globalThis&&globalThis.__generator||function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},i,a,s,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(x){return function(y){return v([x,y])}}function v(x){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,a&&(s=x[0]&2?a.return:x[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,x[1])).done)return s;switch(a=0,s&&(x=[x[0]&2,s.value]),x[0]){case 0:case 1:s=x;break;case 4:return t.label++,{value:x[1],done:!1};case 5:t.label++,a=x[1],x=[0];continue;case 7:x=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(x[0]===6||x[0]===2)){t=0;continue}if(x[0]===3&&(!s||x[1]>s[0]&&x[1]<s[3])){t.label=x[1];break}if(x[0]===6&&t.label<s[1]){t.label=s[1],s=x;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(x);break}s[2]&&t.ops.pop(),t.trys.pop();continue}x=e.call(r,t)}catch(y){x=[6,y],a=0}finally{i=s=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},yc="2.0.0-beta.59",Ki="https://widget.portis.io",wc="https://widget-staging.portis.io",bc=["email","reputation"],Yi="por_portis-iframe",Ji="por_portis-container",ze=document.createElement("iframe");ze.className=Yi;ze.style.width="0";ze.style.height="0";ze.style.border="none";ze.style.position="absolute";ze.style.top="-999px";ze.style.left="-999px";ze.src=Ki;bi().then(function(){document.getElementsByClassName(Yi).length&&console.warn("Portis script was already loaded. This might cause unexpected behavior. If loading with a <script> tag, please make sure that you only load it once."),document.body.appendChild(ze)});var Cc=function(){function r(e,t,i){i===void 0&&(i={}),this._widgetUrl=Ki,js(),this._checkIfWidgetAlreadyInitialized(),this._validateParams(e,t,i),this.config={dappId:e,network:yi(t,i.gasRelay),version:yc,scope:i.scope,registerPageByDefault:i.registerPageByDefault},this.widget=this._initWidget(),this.provider=this._initProvider(i)}return r.prototype.changeNetwork=function(e,t){var i=yi(e,t);this.clearSubprovider(ui),this.clearSubprovider(Fn),this.config.network=i},r.prototype.setDefaultEmail=function(e){this.config.defaultEmail=e},r.prototype.showPortis=function(){return _e(this,void 0,void 0,function(){var e;return Ee(this,function(t){switch(t.label){case 0:return[4,this.widget];case 1:return e=t.sent().communication,[2,e.showPortis(this.config)]}})})},r.prototype.logout=function(){return _e(this,void 0,void 0,function(){var e;return Ee(this,function(t){switch(t.label){case 0:return[4,this.widget];case 1:return e=t.sent().communication,[2,e.logout()]}})})},r.prototype.onLogin=function(e){this._onLoginCallback=e},r.prototype.onLogout=function(e){this._onLogoutCallback=e},r.prototype.onActiveWalletChanged=function(e){this._onActiveWalletChangedCallback=e},r.prototype.onError=function(e){this._onErrorCallback=e},r.prototype.getExtendedPublicKey=function(e,t){return e===void 0&&(e="m/44'/60'/0'/0/0"),t===void 0&&(t="Ethereum"),_e(this,void 0,void 0,function(){var i;return Ee(this,function(a){switch(a.label){case 0:return[4,this.widget];case 1:return i=a.sent().communication,[2,i.getExtendedPublicKey(e,t,this.config)]}})})},r.prototype.importWallet=function(e){return _e(this,void 0,void 0,function(){var t;return Ee(this,function(i){switch(i.label){case 0:return[4,this.widget];case 1:return t=i.sent().communication,[2,t.importWallet(e,this.config)]}})})},r.prototype.isLoggedIn=function(){return _e(this,void 0,void 0,function(){var e;return Ee(this,function(t){switch(t.label){case 0:return[4,this.widget];case 1:return e=t.sent().communication,[2,e.isLoggedIn()]}})})},r.prototype.signBitcoinTransaction=function(e){return _e(this,void 0,void 0,function(){var t;return Ee(this,function(i){switch(i.label){case 0:return[4,this.widget];case 1:return t=i.sent().communication,[2,t.signBitcoinTransaction(e,this.config)]}})})},r.prototype.showBitcoinWallet=function(e){return e===void 0&&(e="m/49'/0'/0'/0/0"),_e(this,void 0,void 0,function(){var t;return Ee(this,function(i){switch(i.label){case 0:return[4,this.widget];case 1:return t=i.sent().communication,[2,t.showBitcoinWallet(e,this.config)]}})})},r.prototype._checkIfWidgetAlreadyInitialized=function(){document.getElementsByClassName(Ji).length&&console.warn("An instance of Portis was already initialized. This is probably a mistake. Make sure that you use the same Portis instance throughout your app.")},r.prototype._validateParams=function(e,t,i){if(!e)throw new Error("[Portis] 'dappId' is required. Get your dappId here: https://dashboard.portis.io");if(!t)throw new Error("[Portis] 'network' is required. Read more about it here: https://docs.portis.io/#/configuration?id=network");if(i.scope){if(!Array.isArray(i.scope))throw new Error("[Portis] 'scope' must be an array. Read more about it here: https://docs.portis.io/#/configuration?id=scope");var a=i.scope.filter(function(s){return bc.indexOf(s)<0});if(a.length>0)throw new Error("[Portis] invalid 'scope' parameter. Read more about it here: https://docs.portis.io/#/configuration?id=scope")}if(i.registerPageByDefault!==void 0&&typeof i.registerPageByDefault!="boolean")throw new Error("[Portis] invalid 'registerPageByDefault' parameter, must be a boolean. Read more about it here: https://docs.portis.io/#/configuration?id=registerPageByDefault");i.staging&&(console.warn("Please note: you are using the Portis STAGING environment."),this._widgetUrl=wc)},r.prototype._initWidget=function(){return _e(this,void 0,void 0,function(){var e,t,i,a,s;return Ee(this,function(l){switch(l.label){case 0:return[4,bi()];case 1:return l.sent(),document.body.contains(ze)&&document.body.removeChild(ze),e=document.createElement("style"),e.innerHTML=Ws,t=document.createElement("div"),t.className=Ji,i=document.createElement("div"),i.id="portis-container-"+Date.now(),i.className="por_portis-widget-frame",t.appendChild(i),document.body.appendChild(t),document.head.appendChild(e),a=li.connectToChild({url:this._widgetUrl,appendTo:document.getElementById(i.id),methods:{setHeight:this._setHeight.bind(this),getWindowSize:this._getWindowSize.bind(this),onLogin:this._onLogin.bind(this),onLogout:this._onLogout.bind(this),onActiveWalletChanged:this._onActiveWalletChanged.bind(this),onError:this._onError.bind(this)}}),a.iframe.style.position="absolute",a.iframe.style.height="100%",a.iframe.style.width="100%",a.iframe.style.border="0 transparent",[4,a.promise];case 2:return s=l.sent(),s.retrieveSession(this.config),[2,{communication:s,iframe:a.iframe,widgetFrame:i}]}})})},r.prototype._initProvider=function(e){var t=this,i=new Ja,a=new qs(i);if(i.send=function(l,d){if(typeof l=="string")return new Promise(function(y,S){i.sendAsync({jsonrpc:"2.0",id:42,method:l,params:d||[]},function(P,h){P?S(P):y(h.result)})});if(d){i.sendAsync(l,d);return}var v=null;switch(l.method){case"eth_accounts":v=t._selectedAddress?[t._selectedAddress]:[];break;case"eth_coinbase":v=t._selectedAddress?[t._selectedAddress]:[];break;case"net_version":v=t._network;break;case"eth_uninstallFilter":i.sendAsync(l,function(y){return y}),v=!0;break;default:var x="The Portis Web3 object does not support synchronous methods like "+l.method+" without a callback parameter.";throw new Error(x)}return{id:l.id,jsonrpc:l.jsonrpc,result:v}},i.addProvider(new go({web3_clientVersion:"Portis/v"+this.config.version+"/javascript",net_listening:!0,eth_hashrate:"0x00",eth_mining:!1,eth_syncing:!0})),i.addProvider(new Fn),i.addProvider(new Ss),i.addProvider(new bo),i.addProvider(new ui),i.addProvider({setEngine:function(l){return l},handleRequest:function(l,d,v){return _e(t,void 0,void 0,function(){return Ee(this,function(x){return l.id||(l.id=42),d(),[2]})})}}),i.addProvider(new gs({getAccounts:function(l){return _e(t,void 0,void 0,function(){var d,v,x,y;return Ee(this,function(S){switch(S.label){case 0:return[4,this.widget];case 1:return d=S.sent().communication,[4,d.getAccounts(this.config)];case 2:return v=S.sent(),x=v.error,y=v.result,!x&&y&&(this._selectedAddress=y[0]),l(x,y),[2]}})})},signTransaction:function(l,d){return _e(t,void 0,void 0,function(){var v,x,y,S;return Ee(this,function(P){switch(P.label){case 0:return[4,this.widget];case 1:return v=P.sent().communication,[4,v.signTransaction(l,this.config)];case 2:return x=P.sent(),y=x.error,S=x.result,d(y,S),[2]}})})},signMessage:function(l,d){return _e(t,void 0,void 0,function(){var v,x,y,S,P;return Ee(this,function(h){switch(h.label){case 0:return[4,this.widget];case 1:return v=h.sent().communication,x=Object.assign({},l,{messageStandard:"signMessage"}),[4,v.signMessage(x,this.config)];case 2:return y=h.sent(),S=y.error,P=y.result,d(S,P),[2]}})})},signPersonalMessage:function(l,d){return _e(t,void 0,void 0,function(){var v,x,y,S,P;return Ee(this,function(h){switch(h.label){case 0:return[4,this.widget];case 1:return v=h.sent().communication,x=Object.assign({},l,{messageStandard:"signPersonalMessage"}),[4,v.signMessage(x,this.config)];case 2:return y=h.sent(),S=y.error,P=y.result,d(S,P),[2]}})})},signTypedMessage:function(l,d){return _e(t,void 0,void 0,function(){var v,x,y,S,P;return Ee(this,function(h){switch(h.label){case 0:return[4,this.widget];case 1:return v=h.sent().communication,x=Object.assign({},l,{messageStandard:"signTypedMessage"}),[4,v.signMessage(x,this.config)];case 2:return y=h.sent(),S=y.error,P=y.result,d(S,P),[2]}})})},signTypedMessageV3:function(l,d){return _e(t,void 0,void 0,function(){var v,x,y,S,P;return Ee(this,function(h){switch(h.label){case 0:return[4,this.widget];case 1:return v=h.sent().communication,x=Object.assign({},l,{messageStandard:"signTypedMessageV3"}),[4,v.signMessage(x,this.config)];case 2:return y=h.sent(),S=y.error,P=y.result,d(S,P),[2]}})})},estimateGas:function(l,d){return _e(t,void 0,void 0,function(){var v;return Ee(this,function(x){switch(x.label){case 0:return[4,Ds(a,l)];case 1:return v=x.sent(),d(null,v),[2]}})})},getGasPrice:function(l){return _e(t,void 0,void 0,function(){return Ee(this,function(d){return l(null,""),[2]})})}})),!e.pocketDevId)i.addProvider({setEngine:function(l){return l},handleRequest:function(l,d,v){return _e(t,void 0,void 0,function(){var x,y,S,P;return Ee(this,function(h){switch(h.label){case 0:return[4,this.widget];case 1:return x=h.sent().communication,[4,x.relay(l,this.config)];case 2:return y=h.sent(),S=y.error,P=y.result,l.method==="net_version"&&(this._network=P,i.networkVersion=this._network),v(S,P),[2]}})})}});else{var s=new Gi.Pocket({devID:e.pocketDevId,networkName:"ETH",netIDs:[this.config.network.chainId]});i.addProvider({setEngine:function(l){return l},handleRequest:function(l,d,v){return _e(t,void 0,void 0,function(){var x,y,S;return Ee(this,function(P){switch(P.label){case 0:return[4,s.sendRelay(new Gi.Relay("ETH",this.config.network.chainId,JSON.stringify(l),s.configuration))];case 1:if(x=P.sent(),x instanceof Error||!x)S=x||new Error("Unknown error"),y=null;else try{y=JSON.parse(x).result,S=null}catch(h){y=null,S=h}return l.method==="net_version"&&(this._network=y,i.networkVersion=this._network),v(S,y),[2]}})})}})}return i.enable=function(){return new Promise(function(l,d){i.sendAsync({method:"eth_accounts"},function(v,x){v?d(v):l(x.result)})})},i.isConnected=function(){return!0},i.isPortis=!0,i.on("error",function(l){l&&l.message&&l.message.includes("PollingBlockTracker")?console.warn("If you see this warning constantly, there might be an error with your RPC node."):console.error(l)}),i.start(),i},r.prototype._setHeight=function(e){return _e(this,void 0,void 0,function(){var t;return Ee(this,function(i){switch(i.label){case 0:return[4,this.widget];case 1:return t=i.sent().widgetFrame,t.style.height=e+"px",[2]}})})},r.prototype._getWindowSize=function(){var e=document.getElementsByTagName("body")[0],t=window.innerWidth||document.documentElement.clientWidth||e.clientWidth,i=window.innerHeight||document.documentElement.clientHeight||e.clientHeight;return{width:t,height:i}},r.prototype._onLogin=function(e,t,i){this._onLoginCallback&&this._onLoginCallback(e,t,i)},r.prototype._onLogout=function(){this._selectedAddress="",this._onLogoutCallback&&this._onLogoutCallback()},r.prototype._onActiveWalletChanged=function(e){this._onActiveWalletChangedCallback&&this._onActiveWalletChangedCallback(e)},r.prototype._onError=function(e){this._onErrorCallback&&this._onErrorCallback(e)},r.prototype.clearSubprovider=function(e){var t=this.provider._providers.find(function(i){return i instanceof e});this.provider.removeProvider(t),this.provider.addProvider(new e)},r}();export{Cc as default};
